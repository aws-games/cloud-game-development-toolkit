
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Cloud Game Development Toolkit | Docs">
      
      
        <meta name="author" content="Amazon Web Services">
      
      
        <link rel="canonical" href="https://aws-games.github.io/cloud-game-development-toolkit/latest/modules/DESIGN_STANDARDS.html">
      
      
        <link rel="prev" href="index.html">
      
      
        <link rel="next" href="perforce/index.html">
      
      
        
      
      
      <link rel="icon" href="../docs/media/logos/favicon.ico">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1">
    
    
      
        <title>Design Standards - Cloud Game Development Toolkit</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.ab4e12ef.min.css">
      
      
  
  
    
      
      
    
  
  
  <style>:root{--md-admonition-icon--info:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M0%208a8%208%200%201%201%2016%200A8%208%200%200%201%200%208m8-6.5a6.5%206.5%200%201%200%200%2013%206.5%206.5%200%200%200%200-13M6.5%207.75A.75.75%200%200%201%207.25%207h1a.75.75%200%200%201%20.75.75v2.75h.25a.75.75%200%200%201%200%201.5h-2a.75.75%200%200%201%200-1.5h.25v-2h-.25a.75.75%200%200%201-.75-.75M8%206a1%201%200%201%201%200-2%201%201%200%200%201%200%202%22/%3E%3C/svg%3E');}</style>



    
    
      
        <script src="https://unpkg.com/iframe-worker/shim"></script>
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../docs/stylesheets/extra.css">
    
      <link rel="stylesheet" href="../docs/stylesheets/themes.css">
    
      <link rel="stylesheet" href="../docs/stylesheets/hero.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    

<!-- Determine title -->

<!-- prettier-ignore -->





  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#cgd-toolkit-module-design-standards" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Cloud Game Development Toolkit" class="md-header__button md-logo" aria-label="Cloud Game Development Toolkit" data-md-component="logo">
      
  <img src="../docs/media/logos/aws-logo-white.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Cloud Game Development Toolkit
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Design Standards
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9 2C5.13 2 2 5.13 2 9c0 2.38 1.19 4.47 3 5.74V17c0 .55.45 1 1 1h6c.55 0 1-.45 1-1v-2.26c1.81-1.27 3-3.36 3-5.74 0-3.87-3.13-7-7-7M6 21c0 .55.45 1 1 1h4c.55 0 1-.45 1-1v-1H6zm13-8h-2l-3.2 9h1.9l.7-2h3.2l.7 2h1.9zm-2.15 5.65L18 15l1.15 3.65z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 0-7 7c0 2.38 1.19 4.47 3 5.74V17a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1v-2.26c1.81-1.27 3-3.36 3-5.74a7 7 0 0 0-7-7M9 21a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1v-1H9z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 1 7 7c0 2.38-1.19 4.47-3 5.74V17a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1v-2.26C6.19 13.47 5 11.38 5 9a7 7 0 0 1 7-7M9 21v-1h6v1a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1m3-17a5 5 0 0 0-5 5c0 2.05 1.23 3.81 3 4.58V16h4v-2.42c1.77-.77 3-2.53 3-4.58a5 5 0 0 0-5-5"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/aws-games/cloud-game-development-toolkit" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    aws-games/cloud-game-development-toolkit
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../docs/index.html" class="md-tabs__link">
        
  
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../docs/getting-started.html" class="md-tabs__link">
        
  
  
    
  
  Getting Started

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../docs/assets/index.html" class="md-tabs__link">
          
  
  
    
  
  Assets

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="index.html" class="md-tabs__link">
          
  
  
    
  
  Modules

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../samples/index.html" class="md-tabs__link">
          
  
  
    
  
  Samples

        </a>
      </li>
    
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../docs/changelog.html" class="md-tabs__link">
        
  
  
    
  
  Changelog

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../docs/security.html" class="md-tabs__link">
        
  
  
    
  
  Security

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../docs/contributing.html" class="md-tabs__link">
        
  
  
    
  
  Contributing

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="https://github.com/orgs/aws-games/projects/1/views/1" class="md-tabs__link">
        
  
  
    
  
  Roadmap

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Cloud Game Development Toolkit" class="md-nav__button md-logo" aria-label="Cloud Game Development Toolkit" data-md-component="logo">
      
  <img src="../docs/media/logos/aws-logo-white.svg" alt="logo">

    </a>
    Cloud Game Development Toolkit
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/aws-games/cloud-game-development-toolkit" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    aws-games/cloud-game-development-toolkit
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../docs/index.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Home
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../docs/getting-started.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Getting Started
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../docs/assets/index.html" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Assets
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3" id="__nav_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Assets
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../docs/assets/packer/index.html" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Packer Templates
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Packer Templates
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2_2" >
        
          
          <label class="md-nav__link" for="__nav_3_2_2" id="__nav_3_2_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Build Agents
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Build Agents
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
      
        
          
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2_2_1" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../assets/packer/build-agents/linux/index.html" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Linux Build Agents
  

    
  </span>
  
  

            </a>
            
          </div>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_3_2_2_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2_2_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    Linux Build Agents
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2_2_2" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../assets/packer/build-agents/windows/index.html" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Windows Build Agent
  

    
  </span>
  
  

            </a>
            
          </div>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_3_2_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2_2_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Windows Build Agent
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../assets/packer/perforce/p4-server/index.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    P4 Server
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../assets/packer/virtual-workstations/index.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Virtual Workstations
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../assets/jenkins-pipelines/index.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Jenkins Pipelines
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../assets/ansible-playbooks/perforce/p4-server/index.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Ansible Playbooks
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../docs/assets/dockerfiles.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Dockerfiles
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          <div class="md-nav__link md-nav__container">
            <a href="index.html" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Modules
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4" id="__nav_4_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Modules
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    Design Standards
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="DESIGN_STANDARDS.html" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    Design Standards
  

    
  </span>
  
  

      </a>
      
        

  

<nav class="md-nav md-nav--secondary" aria-label="On this page">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      On this page
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    <span class="md-ellipsis">
      
        Overview
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#core-design-philosophy" class="md-nav__link">
    <span class="md-ellipsis">
      
        Core Design Philosophy
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Core Design Philosophy">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-readability-first" class="md-nav__link">
    <span class="md-ellipsis">
      
        1. Readability First
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-flexibility-through-modularity" class="md-nav__link">
    <span class="md-ellipsis">
      
        2. Flexibility Through Modularity
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-conservative-variable-exposure" class="md-nav__link">
    <span class="md-ellipsis">
      
        3. Conservative Variable Exposure
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-security-by-default" class="md-nav__link">
    <span class="md-ellipsis">
      
        4. Security by Default
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#module-architecture" class="md-nav__link">
    <span class="md-ellipsis">
      
        Module Architecture
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Module Architecture">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#directory-structure" class="md-nav__link">
    <span class="md-ellipsis">
      
        Directory Structure
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parent-module-pattern" class="md-nav__link">
    <span class="md-ellipsis">
      
        Parent Module Pattern
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#when-to-use-submodules" class="md-nav__link">
    <span class="md-ellipsis">
      
        When to Use Submodules
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#submodule-variable-alignment-pattern" class="md-nav__link">
    <span class="md-ellipsis">
      
        Submodule Variable Alignment Pattern
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#networking-standards" class="md-nav__link">
    <span class="md-ellipsis">
      
        Networking Standards
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Networking Standards">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#access-patterns" class="md-nav__link">
    <span class="md-ellipsis">
      
        Access Patterns
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#load-balancer-strategy" class="md-nav__link">
    <span class="md-ellipsis">
      
        Load Balancer Strategy
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dns-patterns" class="md-nav__link">
    <span class="md-ellipsis">
      
        DNS Patterns
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#variable-structure-philosophy" class="md-nav__link">
    <span class="md-ellipsis">
      
        Variable Structure Philosophy
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#security-group-integration" class="md-nav__link">
    <span class="md-ellipsis">
      
        Security Group Integration
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#variable-design-patterns" class="md-nav__link">
    <span class="md-ellipsis">
      
        Variable Design Patterns
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Variable Design Patterns">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#general-naming-conventions" class="md-nav__link">
    <span class="md-ellipsis">
      
        General Naming Conventions
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-tier-architecture" class="md-nav__link">
    <span class="md-ellipsis">
      
        3-Tier Architecture
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#security-group-strategy" class="md-nav__link">
    <span class="md-ellipsis">
      
        Security Group Strategy
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#resource-patterns" class="md-nav__link">
    <span class="md-ellipsis">
      
        Resource Patterns
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Resource Patterns">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#remote-module-usage-philosophy" class="md-nav__link">
    <span class="md-ellipsis">
      
        Remote Module Usage Philosophy
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#centralized-logging-design-patterns" class="md-nav__link">
    <span class="md-ellipsis">
      
        Centralized Logging Design Patterns
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#naming-strategy" class="md-nav__link">
    <span class="md-ellipsis">
      
        Naming Strategy
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#load-balancer-philosophy" class="md-nav__link">
    <span class="md-ellipsis">
      
        Load Balancer Philosophy
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dns-patterns_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        DNS Patterns
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#security-patterns" class="md-nav__link">
    <span class="md-ellipsis">
      
        Security Patterns
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Security Patterns">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-00000-rule" class="md-nav__link">
    <span class="md-ellipsis">
      
        The 0.0.0.0/0 Rule
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#implementation-pattern" class="md-nav__link">
    <span class="md-ellipsis">
      
        Implementation Pattern
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#provider-patterns" class="md-nav__link">
    <span class="md-ellipsis">
      
        Provider Patterns
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Provider Patterns">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#provider-strategy-root-vs-parent-vs-submodules" class="md-nav__link">
    <span class="md-ellipsis">
      
        Provider Strategy: Root vs Parent vs Submodules
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#provider-value-sourcing-strategies" class="md-nav__link">
    <span class="md-ellipsis">
      
        Provider Value Sourcing Strategies
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#conditional-provider-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      
        Conditional Provider Configuration
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#multi-region-global-replication-architecture" class="md-nav__link">
    <span class="md-ellipsis">
      
        Multi-Region: Global Replication Architecture
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#version-conflicts-and-resolution" class="md-nav__link">
    <span class="md-ellipsis">
      
        Version Conflicts and Resolution
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#provider-configuration-timing" class="md-nav__link">
    <span class="md-ellipsis">
      
        Provider Configuration Timing
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aws-provider-best-practices" class="md-nav__link">
    <span class="md-ellipsis">
      
        AWS Provider Best Practices
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="AWS Provider Best Practices">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#security-group-rules" class="md-nav__link">
    <span class="md-ellipsis">
      
        Security Group Rules
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iam-policies" class="md-nav__link">
    <span class="md-ellipsis">
      
        IAM Policies
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iam-role-attachments" class="md-nav__link">
    <span class="md-ellipsis">
      
        IAM Role Attachments
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#output-strategy" class="md-nav__link">
    <span class="md-ellipsis">
      
        Output Strategy
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Output Strategy">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#what-to-include" class="md-nav__link">
    <span class="md-ellipsis">
      
        What to Include
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#breaking-changes-prevention" class="md-nav__link">
    <span class="md-ellipsis">
      
        Breaking Changes Prevention
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Breaking Changes Prevention">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#critical-rules" class="md-nav__link">
    <span class="md-ellipsis">
      
        Critical Rules
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#safe-patterns" class="md-nav__link">
    <span class="md-ellipsis">
      
        Safe Patterns
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#implementation-checklist" class="md-nav__link">
    <span class="md-ellipsis">
      
        Implementation Checklist
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Implementation Checklist">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#for-new-modules_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        For New Modules
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#for-existing-modules_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        For Existing Modules
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#building-great-modules-together" class="md-nav__link">
    <span class="md-ellipsis">
      
        Building Great Modules Together
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3" >
        
          
          <label class="md-nav__link" for="__nav_4_3" id="__nav_4_3_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Perforce
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Perforce
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3_1" >
        
          
          <label class="md-nav__link" for="__nav_4_3_1" id="__nav_4_3_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Perforce
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_3_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_3_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    Perforce
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
      
        
          
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3_1_1" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="perforce/index.html" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Installation & Usage
  

    
  </span>
  
  

            </a>
            
          </div>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_4_3_1_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_3_1_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    Installation & Usage
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3_1_2" >
        
          
          <label class="md-nav__link" for="__nav_4_3_1_2" id="__nav_4_3_1_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Submodules
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_4_3_1_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_3_1_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Submodules
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
      
        
          
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3_1_2_1" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="perforce/modules/p4-server/index.html" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    P4 Server
  

    
  </span>
  
  

            </a>
            
          </div>
        
        <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_4_3_1_2_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_3_1_2_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    P4 Server
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3_1_2_2" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="perforce/modules/p4-auth/index.html" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    P4Auth
  

    
  </span>
  
  

            </a>
            
          </div>
        
        <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_4_3_1_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_3_1_2_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    P4Auth
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3_1_2_3" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="perforce/modules/p4-code-review/index.html" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    P4 Code Review
  

    
  </span>
  
  

            </a>
            
          </div>
        
        <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_4_3_1_2_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_3_1_2_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    P4 Code Review
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_4" >
        
          
          <label class="md-nav__link" for="__nav_4_4" id="__nav_4_4_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    TeamCity
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    TeamCity
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_4_1" >
        
          
          <label class="md-nav__link" for="__nav_4_4_1" id="__nav_4_4_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    TeamCity
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_4_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_4_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    TeamCity
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
      
        
          
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_4_1_1" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="teamcity/index.html" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Installation and Usage
  

    
  </span>
  
  

            </a>
            
          </div>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_4_4_1_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_4_1_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    Installation and Usage
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_5" >
        
          
          <label class="md-nav__link" for="__nav_4_5" id="__nav_4_5_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Jenkins
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Jenkins
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_5_1" >
        
          
          <label class="md-nav__link" for="__nav_4_5_1" id="__nav_4_5_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Jenkins
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_5_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_5_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    Jenkins
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
      
        
          
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_5_1_1" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="jenkins/index.html" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Installation and Usage
  

    
  </span>
  
  

            </a>
            
          </div>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_4_5_1_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_5_1_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    Installation and Usage
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_6" >
        
          
          <label class="md-nav__link" for="__nav_4_6" id="__nav_4_6_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Unreal Engine
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    Unreal Engine
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_6_1" >
        
          
          <label class="md-nav__link" for="__nav_4_6_1" id="__nav_4_6_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Unreal Engine Horde
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_6_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_6_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    Unreal Engine Horde
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
      
        
          
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_6_1_1" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="unreal/horde/index.html" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Installation and Usage
  

    
  </span>
  
  

            </a>
            
          </div>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_4_6_1_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_6_1_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    Installation and Usage
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_6_2" >
        
          
          <label class="md-nav__link" for="__nav_4_6_2" id="__nav_4_6_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Unreal Cloud DDC
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_6_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_6_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Unreal Cloud DDC
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
      
        
          
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_6_2_1" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="unreal/unreal-cloud-ddc/unreal-cloud-ddc-infra/index.html" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    DDC Infrastructure
  

    
  </span>
  
  

            </a>
            
          </div>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_4_6_2_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_6_2_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    DDC Infrastructure
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_6_2_2" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="unreal/unreal-cloud-ddc/unreal-cloud-ddc-intra-cluster/index.html" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    DDC Intra-Cluster
  

    
  </span>
  
  

            </a>
            
          </div>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_4_6_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_6_2_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    DDC Intra-Cluster
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_7" >
        
          
          <label class="md-nav__link" for="__nav_4_7" id="__nav_4_7_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Unity
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_7">
            <span class="md-nav__icon md-icon"></span>
            
  
    Unity
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_7_1" >
        
          
          <label class="md-nav__link" for="__nav_4_7_1" id="__nav_4_7_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Accelerator
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_7_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_7_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    Accelerator
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
      
        
          
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_7_1_1" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="unity/accelerator/index.html" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Installation and Usage
  

    
  </span>
  
  

            </a>
            
          </div>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_4_7_1_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_7_1_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    Installation and Usage
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_7_2" >
        
          
          <label class="md-nav__link" for="__nav_4_7_2" id="__nav_4_7_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Licensing Server
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_7_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_7_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Licensing Server
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
      
        
          
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_7_2_1" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="unity/floating-license-server/index.html" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Installation and Usage
  

    
  </span>
  
  

            </a>
            
          </div>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_4_7_2_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_7_2_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    Installation and Usage
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_8" >
        
          
          <label class="md-nav__link" for="__nav_4_8" id="__nav_4_8_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    VDI
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_8">
            <span class="md-nav__icon md-icon"></span>
            
  
    VDI
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_8_1" >
        
          
          <label class="md-nav__link" for="__nav_4_8_1" id="__nav_4_8_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    VDI
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_8_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_8_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    VDI
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
      
        
          
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_8_1_1" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="vdi/index.html" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Installation & Usage
  

    
  </span>
  
  

            </a>
            
          </div>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_4_8_1_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_8_1_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    Installation & Usage
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../samples/index.html" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Samples
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_5" id="__nav_5_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Samples
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../samples/simple-build-pipeline/index.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Simple Build Pipeline
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../samples/unreal-cloud-ddc-single-region/index.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Unreal Cloud DDC Single Region
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../docs/changelog.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Changelog
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../docs/security.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Security
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../docs/contributing.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Contributing
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="https://github.com/orgs/aws-games/projects/1/views/1" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Roadmap
  

    
  </span>
  
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  

<nav class="md-nav md-nav--secondary" aria-label="On this page">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      On this page
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    <span class="md-ellipsis">
      
        Overview
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#core-design-philosophy" class="md-nav__link">
    <span class="md-ellipsis">
      
        Core Design Philosophy
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Core Design Philosophy">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-readability-first" class="md-nav__link">
    <span class="md-ellipsis">
      
        1. Readability First
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-flexibility-through-modularity" class="md-nav__link">
    <span class="md-ellipsis">
      
        2. Flexibility Through Modularity
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-conservative-variable-exposure" class="md-nav__link">
    <span class="md-ellipsis">
      
        3. Conservative Variable Exposure
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-security-by-default" class="md-nav__link">
    <span class="md-ellipsis">
      
        4. Security by Default
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#module-architecture" class="md-nav__link">
    <span class="md-ellipsis">
      
        Module Architecture
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Module Architecture">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#directory-structure" class="md-nav__link">
    <span class="md-ellipsis">
      
        Directory Structure
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parent-module-pattern" class="md-nav__link">
    <span class="md-ellipsis">
      
        Parent Module Pattern
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#when-to-use-submodules" class="md-nav__link">
    <span class="md-ellipsis">
      
        When to Use Submodules
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#submodule-variable-alignment-pattern" class="md-nav__link">
    <span class="md-ellipsis">
      
        Submodule Variable Alignment Pattern
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#networking-standards" class="md-nav__link">
    <span class="md-ellipsis">
      
        Networking Standards
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Networking Standards">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#access-patterns" class="md-nav__link">
    <span class="md-ellipsis">
      
        Access Patterns
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#load-balancer-strategy" class="md-nav__link">
    <span class="md-ellipsis">
      
        Load Balancer Strategy
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dns-patterns" class="md-nav__link">
    <span class="md-ellipsis">
      
        DNS Patterns
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#variable-structure-philosophy" class="md-nav__link">
    <span class="md-ellipsis">
      
        Variable Structure Philosophy
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#security-group-integration" class="md-nav__link">
    <span class="md-ellipsis">
      
        Security Group Integration
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#variable-design-patterns" class="md-nav__link">
    <span class="md-ellipsis">
      
        Variable Design Patterns
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Variable Design Patterns">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#general-naming-conventions" class="md-nav__link">
    <span class="md-ellipsis">
      
        General Naming Conventions
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-tier-architecture" class="md-nav__link">
    <span class="md-ellipsis">
      
        3-Tier Architecture
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#security-group-strategy" class="md-nav__link">
    <span class="md-ellipsis">
      
        Security Group Strategy
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#resource-patterns" class="md-nav__link">
    <span class="md-ellipsis">
      
        Resource Patterns
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Resource Patterns">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#remote-module-usage-philosophy" class="md-nav__link">
    <span class="md-ellipsis">
      
        Remote Module Usage Philosophy
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#centralized-logging-design-patterns" class="md-nav__link">
    <span class="md-ellipsis">
      
        Centralized Logging Design Patterns
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#naming-strategy" class="md-nav__link">
    <span class="md-ellipsis">
      
        Naming Strategy
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#load-balancer-philosophy" class="md-nav__link">
    <span class="md-ellipsis">
      
        Load Balancer Philosophy
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dns-patterns_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        DNS Patterns
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#security-patterns" class="md-nav__link">
    <span class="md-ellipsis">
      
        Security Patterns
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Security Patterns">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-00000-rule" class="md-nav__link">
    <span class="md-ellipsis">
      
        The 0.0.0.0/0 Rule
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#implementation-pattern" class="md-nav__link">
    <span class="md-ellipsis">
      
        Implementation Pattern
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#provider-patterns" class="md-nav__link">
    <span class="md-ellipsis">
      
        Provider Patterns
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Provider Patterns">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#provider-strategy-root-vs-parent-vs-submodules" class="md-nav__link">
    <span class="md-ellipsis">
      
        Provider Strategy: Root vs Parent vs Submodules
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#provider-value-sourcing-strategies" class="md-nav__link">
    <span class="md-ellipsis">
      
        Provider Value Sourcing Strategies
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#conditional-provider-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      
        Conditional Provider Configuration
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#multi-region-global-replication-architecture" class="md-nav__link">
    <span class="md-ellipsis">
      
        Multi-Region: Global Replication Architecture
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#version-conflicts-and-resolution" class="md-nav__link">
    <span class="md-ellipsis">
      
        Version Conflicts and Resolution
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#provider-configuration-timing" class="md-nav__link">
    <span class="md-ellipsis">
      
        Provider Configuration Timing
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aws-provider-best-practices" class="md-nav__link">
    <span class="md-ellipsis">
      
        AWS Provider Best Practices
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="AWS Provider Best Practices">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#security-group-rules" class="md-nav__link">
    <span class="md-ellipsis">
      
        Security Group Rules
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iam-policies" class="md-nav__link">
    <span class="md-ellipsis">
      
        IAM Policies
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iam-role-attachments" class="md-nav__link">
    <span class="md-ellipsis">
      
        IAM Role Attachments
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#output-strategy" class="md-nav__link">
    <span class="md-ellipsis">
      
        Output Strategy
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Output Strategy">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#what-to-include" class="md-nav__link">
    <span class="md-ellipsis">
      
        What to Include
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#breaking-changes-prevention" class="md-nav__link">
    <span class="md-ellipsis">
      
        Breaking Changes Prevention
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Breaking Changes Prevention">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#critical-rules" class="md-nav__link">
    <span class="md-ellipsis">
      
        Critical Rules
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#safe-patterns" class="md-nav__link">
    <span class="md-ellipsis">
      
        Safe Patterns
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#implementation-checklist" class="md-nav__link">
    <span class="md-ellipsis">
      
        Implementation Checklist
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Implementation Checklist">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#for-new-modules_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        For New Modules
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#for-existing-modules_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        For Existing Modules
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#building-great-modules-together" class="md-nav__link">
    <span class="md-ellipsis">
      
        Building Great Modules Together
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="cgd-toolkit-module-design-standards">CGD Toolkit Module Design Standards<a class="headerlink" href="#cgd-toolkit-module-design-standards" title="Permanent link">&para;</a></h1>
<h2 id="overview">Overview<a class="headerlink" href="#overview" title="Permanent link">&para;</a></h2>
<p>This document captures the design decisions and patterns we've collectively agreed upon for CGD Toolkit modules. These standards emerged from real-world usage, community feedback, and lessons learned from building production game development infrastructure.</p>
<p><strong>Why These Standards Matter</strong>: As CGD Toolkit grows, consistency becomes critical for maintainability, user experience, and contributor onboarding. These patterns represent our best practices for building reliable, secure, and user-friendly Terraform modules.</p>
<p><strong>Living Document</strong>: These standards evolve based on community needs and new AWS capabilities. When proposing changes, consider backward compatibility and migration paths for existing users.</p>
<p><strong>Module Evolution</strong>: You might find some modules that don't follow these patterns yet - they're likely on our refactoring roadmap. If you spot a recently updated module that diverges from these standards, let us know! We're always improving and appreciate the feedback.</p>
<h2 id="core-design-philosophy">Core Design Philosophy<a class="headerlink" href="#core-design-philosophy" title="Permanent link">&para;</a></h2>
<h3 id="1-readability-first"><strong>1. Readability First</strong><a class="headerlink" href="#1-readability-first" title="Permanent link">&para;</a></h3>
<p><strong>Why</strong>: Game development teams often include infrastructure newcomers. Clear, understandable code reduces onboarding time and prevents misconfigurations.</p>
<ul>
<li>Prefer explicit over implicit configurations</li>
<li>Use descriptive variable names that explain purpose</li>
<li>Self-documenting code over clever abstractions</li>
<li>Comment complex logic with business context</li>
</ul>
<h3 id="2-flexibility-through-modularity"><strong>2. Flexibility Through Modularity</strong><a class="headerlink" href="#2-flexibility-through-modularity" title="Permanent link">&para;</a></h3>
<p><strong>Why</strong>: Game studios have diverse infrastructure needs. Rigid, opinionated modules force workarounds and reduce adoption.</p>
<ul>
<li>Modules provide building blocks, not complete solutions</li>
<li>Configuration decisions happen in examples, not module internals</li>
<li>Support multiple deployment patterns through simple variables</li>
<li>Enable customization without requiring module forking</li>
</ul>
<h3 id="3-conservative-variable-exposure"><strong>3. Conservative Variable Exposure</strong><a class="headerlink" href="#3-conservative-variable-exposure" title="Permanent link">&para;</a></h3>
<p><strong>Why</strong>: Every exposed variable is a commitment to backward compatibility. We learned this from early modules that exposed too many options.</p>
<ul>
<li>Start with minimal variables based on known use cases</li>
<li>Add variables when users request them (demand-driven)</li>
<li>Easier to add than remove (breaking changes are painful)</li>
<li>Default values should work for 80% of use cases</li>
</ul>
<h3 id="4-security-by-default"><strong>4. Security by Default</strong><a class="headerlink" href="#4-security-by-default" title="Permanent link">&para;</a></h3>
<p><strong>Why</strong>: Game development infrastructure often handles sensitive assets and player data. Security mistakes are costly and hard to fix later.</p>
<ul>
<li>No 0.0.0.0/0 ingress rules in module code (unless you have a <strong><em>really</em></strong> good reason - we will ask) - <a href="#security-patterns">more details</a></li>
<li>Users explicitly define allowed access (security groups, CIDRs)</li>
<li>Private-first architecture with controlled external access</li>
<li>HTTPS enforcement for internet-facing services</li>
</ul>
<h2 id="module-architecture">Module Architecture<a class="headerlink" href="#module-architecture" title="Permanent link">&para;</a></h2>
<h3 id="directory-structure"><strong>Directory Structure</strong><a class="headerlink" href="#directory-structure" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>modules/service-name/
 main.tf              # Parent module orchestration
 variables.tf         # Input variables with validation
 outputs.tf           # Module outputs
 versions.tf          # Terraform and provider version constraints
 README.md            # Module documentation
 modules/             # Submodules (when needed)
    infra/          # AWS resources only
    services/       # Kubernetes/Helm only
 tests/              # Terraform tests
    setup/          # CI parameter retrieval
    *.tftest.hcl    # Test files
 examples/           # Working examples
     */              # Example configurations
</code></pre></div>
<h3 id="parent-module-pattern"><strong>Parent Module Pattern</strong><a class="headerlink" href="#parent-module-pattern" title="Permanent link">&para;</a></h3>
<p><strong>Why</strong>: When modules have submodules, the parent focuses on user experience while submodules handle implementation details.</p>
<p><strong>Responsibilities</strong>:</p>
<ul>
<li>Create some resources directly (DNS zones, security groups, etc.)</li>
<li>Provide clean, user-friendly variable interface</li>
<li>Validate inputs with helpful error messages</li>
<li>Orchestrate submodules with proper dependencies (when present)</li>
<li>Expose essential outputs for downstream usage</li>
</ul>
<h3 id="when-to-use-submodules"><strong>When to Use Submodules</strong><a class="headerlink" href="#when-to-use-submodules" title="Permanent link">&para;</a></h3>
<p><strong>Why Split</strong>: Provider separation or complexity management.</p>
<div class="highlight"><pre><span></span><code><span class="c1">#  GOOD - Different providers</span>
<span class="kr">module</span><span class="w"> </span><span class="nv">&quot;infra&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="na">source</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;./modules/infra&quot;</span>
<span class="w">  </span><span class="nb">providers</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="na">aws</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">aws</span><span class="w"> </span><span class="p">}</span>
<span class="p">}</span>

<span class="kr">module</span><span class="w"> </span><span class="nv">&quot;services&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="na">source</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;./modules/services&quot;</span>
<span class="w">  </span><span class="nb">providers</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="na">kubernetes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">kubernetes</span><span class="p">,</span><span class="w"> </span><span class="na">helm</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">helm</span><span class="w"> </span><span class="p">}</span>
<span class="w">  </span><span class="na">depends_on</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="nv">module.infra</span><span class="p">]</span>
<span class="p">}</span>

<span class="c1">#  AVOID - Same provider, no clear benefit</span>
<span class="kr">module</span><span class="w"> </span><span class="nv">&quot;s3_bucket&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="na">source</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;./modules/s3&quot;</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="submodule-variable-alignment-pattern"><strong>Submodule Variable Alignment Pattern</strong><a class="headerlink" href="#submodule-variable-alignment-pattern" title="Permanent link">&para;</a></h3>
<p><strong>When using submodules, align parent variables directly to submodules for clarity:</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1">#  GOOD - Clear submodule alignment</span>
<span class="kr">variable</span><span class="w"> </span><span class="nv">&quot;infra_config&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="na">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">object</span><span class="p">({</span>
<span class="c1">    # All infrastructure settings grouped together</span>
<span class="w">    </span><span class="na">kubernetes_version</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">optional</span><span class="p">(</span><span class="kt">string</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;1.33&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="na">database_config</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">object</span><span class="p">({...})</span>
<span class="w">    </span><span class="na">networking_config</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">object</span><span class="p">({...})</span>
<span class="w">  </span><span class="p">})</span>
<span class="p">}</span>

<span class="kr">variable</span><span class="w"> </span><span class="nv">&quot;services_config&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="na">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">object</span><span class="p">({</span>
<span class="c1">    # All service settings grouped together</span>
<span class="w">    </span><span class="na">app_version</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">optional</span><span class="p">(</span><span class="kt">string</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;latest&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="na">credentials_arn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">string</span>
<span class="w">  </span><span class="p">})</span>
<span class="p">}</span>

<span class="c1"># Parent module orchestration</span>
<span class="kr">module</span><span class="w"> </span><span class="nv">&quot;infra&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="na">source</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;./modules/infra&quot;</span>
<span class="w">  </span><span class="na">config</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">var.infra_config</span><span class="c1">  # Direct alignment</span>
<span class="p">}</span>

<span class="kr">module</span><span class="w"> </span><span class="nv">&quot;services&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="na">source</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;./modules/services&quot;</span>
<span class="w">  </span><span class="na">config</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">var.services_config</span><span class="c1">  # Direct alignment</span>
<span class="p">}</span>

<span class="c1">#  AVOID - Scattered variables requiring manual mapping</span>
<span class="kr">variable</span><span class="w"> </span><span class="nv">&quot;kubernetes_version&quot;</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span>
<span class="kr">variable</span><span class="w"> </span><span class="nv">&quot;database_instance_type&quot;</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span>
<span class="kr">variable</span><span class="w"> </span><span class="nv">&quot;app_version&quot;</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span>
<span class="kr">variable</span><span class="w"> </span><span class="nv">&quot;credentials_arn&quot;</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span>

<span class="kr">module</span><span class="w"> </span><span class="nv">&quot;infra&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="na">kubernetes_version</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">var.kubernetes_version</span>
<span class="w">  </span><span class="na">database_instance_type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">var.database_instance_type</span>
<span class="c1">  # Manual mapping of many variables</span>
<span class="p">}</span>
</code></pre></div>
<p><strong>Benefits of Submodule Alignment:</strong></p>
<ul>
<li><strong>Clear responsibility</strong> - Users understand which settings affect which components</li>
<li><strong>Easy orchestration</strong> - Parent module passes entire objects to submodules</li>
<li><strong>Conditional creation</strong> - <code>config = null</code> skips entire submodules</li>
<li><strong>Reduced complexity</strong> - No manual variable mapping in parent module</li>
<li><strong>Logical grouping</strong> - Related settings stay together</li>
</ul>
<h2 id="networking-standards">Networking Standards<a class="headerlink" href="#networking-standards" title="Permanent link">&para;</a></h2>
<h3 id="access-patterns"><strong>Access Patterns</strong><a class="headerlink" href="#access-patterns" title="Permanent link">&para;</a></h3>
<p><strong>CGD Toolkit modules support three standardized access patterns:</strong></p>
<ul>
<li><strong>Internet-Accessible</strong> - Public services (DDC, Perforce, Jenkins) with controlled external access</li>
<li><strong>VPC-Only</strong> - Internal services (Databases, Monitoring) accessible only within VPC</li>
<li><strong>Mixed</strong> - Services with both public and private components</li>
</ul>
<h3 id="load-balancer-strategy"><strong>Load Balancer Strategy</strong><a class="headerlink" href="#load-balancer-strategy" title="Permanent link">&para;</a></h3>
<p><strong>Consistent approach across all modules:</strong></p>
<ul>
<li><strong>Default to NLB</strong> for most services (connection-level health checks, static IPs, predictable routing)</li>
<li><strong>ALB when needed</strong> for HTTP/HTTPS routing, WAF integration, path-based routing</li>
<li><strong>User controls creation</strong> via boolean flags or configuration objects</li>
<li><strong>Automatic target group management</strong> - modules handle the complexity</li>
<li><strong>Cost justified</strong> - ~$16/month NLB vs Route53 health check complexity</li>
</ul>
<h3 id="dns-patterns"><strong>DNS Patterns</strong><a class="headerlink" href="#dns-patterns" title="Permanent link">&para;</a></h3>
<p><strong>Regional endpoints by default following AWS service patterns:</strong></p>
<ul>
<li><strong>Regional endpoints</strong> - <code>us-east-1.service.company.com</code> (performance, isolation, explicit control)</li>
<li><strong>Private zones</strong> - Always created for internal service discovery (<code>service.internal</code>)</li>
<li><strong>Global endpoints</strong> - Optional for advanced routing (latency-based, geolocation, failover)</li>
<li><strong>DNS hierarchy</strong> - <code>region.cluster.platform.service.domain</code> for complex services</li>
</ul>
<h3 id="variable-structure-philosophy"><strong>Variable Structure Philosophy</strong><a class="headerlink" href="#variable-structure-philosophy" title="Permanent link">&para;</a></h3>
<p><strong>Hybrid approach following popular module patterns:</strong></p>
<ul>
<li><strong>Flat variables</strong> for simple, common settings (following terraform-aws-modules pattern)</li>
<li><strong>Complex objects</strong> for logical grouping when they provide clear value (following AWS-IA pattern)</li>
<li><strong>Submodule alignment</strong> - Complex objects that map directly to submodules (<code>infra_config</code>, <code>services_config</code>)</li>
<li><strong>Component objects acceptable</strong> - <code>load_balancer_config</code>, <code>security_groups</code> for logical grouping</li>
<li><strong>Conditional creation</strong> - <code>config = null</code> skips entire components</li>
<li><strong>Intelligent defaults</strong> - Work for 80% of use cases, reduce cognitive load</li>
</ul>
<h3 id="security-group-integration"><strong>Security Group Integration</strong><a class="headerlink" href="#security-group-integration" title="Permanent link">&para;</a></h3>
<p><strong>Follow Terraform resource patterns for familiarity:</strong></p>
<ul>
<li><strong>User-controlled external access</strong> - Users provide security groups with their own rules</li>
<li><strong>Module-created internal groups</strong> - For service-to-service communication</li>
<li><strong>Component-specific grouping</strong> - General + NLB-specific + ALB-specific</li>
<li><strong>CIDR validation</strong> - No 0.0.0.0/0 ingress rules in module code</li>
</ul>
<h2 id="variable-design-patterns">Variable Design Patterns<a class="headerlink" href="#variable-design-patterns" title="Permanent link">&para;</a></h2>
<h3 id="general-naming-conventions"><strong>General Naming Conventions</strong><a class="headerlink" href="#general-naming-conventions" title="Permanent link">&para;</a></h3>
<p><strong>Why Descriptive Names</strong>: We avoid generic names like <code>this</code> because they don't scale and become confusing when you need multiple resources.</p>
<div class="highlight"><pre><span></span><code><span class="c1">#  GOOD - Descriptive, purpose-driven names</span>
<span class="kr">resource</span><span class="w"> </span><span class="nc">&quot;aws_lb&quot;</span><span class="w"> </span><span class="nv">&quot;nlb&quot;</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span><span class="c1">                    # Network Load Balancer</span>
<span class="kr">resource</span><span class="w"> </span><span class="nc">&quot;aws_lb&quot;</span><span class="w"> </span><span class="nv">&quot;alb&quot;</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span><span class="c1">                    # Application Load Balancer</span>
<span class="kr">resource</span><span class="w"> </span><span class="nc">&quot;aws_eks_cluster&quot;</span><span class="w"> </span><span class="nv">&quot;main&quot;</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span><span class="c1">          # Primary EKS cluster</span>
<span class="kr">resource</span><span class="w"> </span><span class="nc">&quot;aws_security_group&quot;</span><span class="w"> </span><span class="nv">&quot;nlb&quot;</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span><span class="c1">        # NLB security group</span>
<span class="kr">resource</span><span class="w"> </span><span class="nc">&quot;aws_security_group&quot;</span><span class="w"> </span><span class="nv">&quot;internal&quot;</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span><span class="c1">   # Internal communication</span>
<span class="kr">resource</span><span class="w"> </span><span class="nc">&quot;aws_s3_bucket&quot;</span><span class="w"> </span><span class="nv">&quot;artifacts&quot;</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span><span class="c1">       # Artifacts storage</span>
<span class="kr">resource</span><span class="w"> </span><span class="nc">&quot;aws_s3_bucket&quot;</span><span class="w"> </span><span class="nv">&quot;logs&quot;</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span><span class="c1">            # Logs storage</span>
<span class="kr">resource</span><span class="w"> </span><span class="nc">&quot;aws_route53_zone&quot;</span><span class="w"> </span><span class="nv">&quot;private&quot;</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span><span class="c1">      # Private DNS zone</span>

<span class="c1">#  BAD - Generic names that don&#39;t scale</span>
<span class="kr">resource</span><span class="w"> </span><span class="nc">&quot;aws_lb&quot;</span><span class="w"> </span><span class="nv">&quot;this&quot;</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span><span class="c1">           # What kind of load balancer?</span>
<span class="kr">resource</span><span class="w"> </span><span class="nc">&quot;aws_lb&quot;</span><span class="w"> </span><span class="nv">&quot;this2&quot;</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span><span class="c1">          # Now you need a second one...</span>
<span class="kr">resource</span><span class="w"> </span><span class="nc">&quot;aws_s3_bucket&quot;</span><span class="w"> </span><span class="nv">&quot;bucket&quot;</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span><span class="c1">  # What&#39;s it for?</span>
<span class="kr">resource</span><span class="w"> </span><span class="nc">&quot;aws_s3_bucket&quot;</span><span class="w"> </span><span class="nv">&quot;main&quot;</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span><span class="c1">    # Still not descriptive</span>
</code></pre></div>
<p><strong>The Problem with Generic Names</strong>:</p>
<ul>
<li><strong>Not descriptive</strong>: <code>this</code> tells you nothing about purpose</li>
<li><strong>Doesn't scale</strong>: Need a second resource? Now it's <code>this2</code> or you rename everything</li>
<li><strong>Hard to reference</strong>: <code>aws_lb.this.dns_name</code> - which load balancer?</li>
<li><strong>Confusing in outputs</strong>: <code>nlb_dns_name = aws_lb.this.dns_name</code> - misleading</li>
</ul>
<p><strong>Our Standard Logical Names</strong>:</p>
<ul>
<li><strong><code>nlb</code></strong>: Network Load Balancer</li>
<li><strong><code>alb</code></strong>: Application Load Balancer</li>
<li><strong><code>main</code></strong>: Primary resource of its type (EKS cluster, VPC)</li>
<li><strong><code>internal</code></strong>: Internal communication security group</li>
<li><strong><code>artifacts</code></strong>: Artifact storage bucket</li>
<li><strong><code>logs</code></strong>: Logging storage bucket</li>
<li><strong><code>private</code></strong>: Private DNS zone</li>
</ul>
<h3 id="3-tier-architecture"><strong>3-Tier Architecture</strong><a class="headerlink" href="#3-tier-architecture" title="Permanent link">&para;</a></h3>
<p><strong>Why</strong>: Users consistently need to separate applications, supporting services, and load balancers.</p>
<div class="highlight"><pre><span></span><code><span class="kr">variable</span><span class="w"> </span><span class="nv">&quot;application_subnets&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="na">type</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="nf">list</span><span class="p">(</span><span class="kt">string</span><span class="p">)</span>
<span class="w">  </span><span class="na">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;Subnets for primary business applications&quot;</span>
<span class="p">}</span>

<span class="kr">variable</span><span class="w"> </span><span class="nv">&quot;service_subnets&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="na">type</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="nf">list</span><span class="p">(</span><span class="kt">string</span><span class="p">)</span>
<span class="w">  </span><span class="na">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;Subnets for supporting services (databases, caches)&quot;</span>
<span class="w">  </span><span class="na">default</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="p">[]</span><span class="c1">  # Uses application_subnets if not specified</span>
<span class="p">}</span>

<span class="kr">variable</span><span class="w"> </span><span class="nv">&quot;load_balancer_config&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="na">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">object</span><span class="p">({</span>
<span class="w">    </span><span class="na">nlb</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">object</span><span class="p">({</span>
<span class="w">      </span><span class="na">enabled</span><span class="w">         </span><span class="o">=</span><span class="w"> </span><span class="err">optional</span><span class="p">(</span><span class="kt">bool</span><span class="p">,</span><span class="w"> </span><span class="no">true</span><span class="p">)</span>
<span class="w">      </span><span class="na">internet_facing</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">optional</span><span class="p">(</span><span class="kt">bool</span><span class="p">,</span><span class="w"> </span><span class="no">true</span><span class="p">)</span>
<span class="w">      </span><span class="na">subnets</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="nf">list</span><span class="p">(</span><span class="kt">string</span><span class="p">)</span>
<span class="w">    </span><span class="p">})</span>
<span class="w">    </span><span class="na">alb</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">optional</span><span class="p">(</span><span class="kt">object</span><span class="p">({</span>
<span class="w">      </span><span class="na">enabled</span><span class="w">         </span><span class="o">=</span><span class="w"> </span><span class="err">optional</span><span class="p">(</span><span class="kt">bool</span><span class="p">,</span><span class="w"> </span><span class="no">false</span><span class="p">)</span>
<span class="w">      </span><span class="na">internet_facing</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">optional</span><span class="p">(</span><span class="kt">bool</span><span class="p">,</span><span class="w"> </span><span class="no">true</span><span class="p">)</span>
<span class="w">      </span><span class="na">subnets</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="nf">list</span><span class="p">(</span><span class="kt">string</span><span class="p">)</span>
<span class="w">      </span><span class="na">enable_waf</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="err">optional</span><span class="p">(</span><span class="kt">bool</span><span class="p">,</span><span class="w"> </span><span class="no">false</span><span class="p">)</span>
<span class="w">    </span><span class="p">}),</span><span class="w"> </span><span class="kt">null</span><span class="p">)</span>
<span class="w">  </span><span class="p">})</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="security-group-strategy"><strong>Security Group Strategy</strong><a class="headerlink" href="#security-group-strategy" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="kr">variable</span><span class="w"> </span><span class="nv">&quot;security_groups&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="na">type</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="nf">list</span><span class="p">(</span><span class="kt">string</span><span class="p">)</span>
<span class="w">  </span><span class="na">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;Security group IDs for external access&quot;</span>
<span class="w">  </span><span class="na">default</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="p">[]</span>
<span class="p">}</span>

<span class="kr">variable</span><span class="w"> </span><span class="nv">&quot;additional_security_groups&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="na">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">object</span><span class="p">({</span>
<span class="w">    </span><span class="na">load_balancer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">optional</span><span class="p">(</span><span class="nf">list</span><span class="p">(</span><span class="kt">string</span><span class="p">),</span><span class="w"> </span><span class="p">[])</span>
<span class="w">    </span><span class="na">eks_cluster</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="err">optional</span><span class="p">(</span><span class="nf">list</span><span class="p">(</span><span class="kt">string</span><span class="p">),</span><span class="w"> </span><span class="p">[])</span>
<span class="w">  </span><span class="p">})</span>
<span class="w">  </span><span class="na">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;Component-specific security groups&quot;</span>
<span class="w">  </span><span class="nb">default</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="p">{}</span>
<span class="p">}</span>
</code></pre></div>
<h2 id="resource-patterns">Resource Patterns<a class="headerlink" href="#resource-patterns" title="Permanent link">&para;</a></h2>
<h3 id="remote-module-usage-philosophy"><strong>Remote Module Usage Philosophy</strong><a class="headerlink" href="#remote-module-usage-philosophy" title="Permanent link">&para;</a></h3>
<p><strong>CGD Toolkit modules prefer direct resources over remote module dependencies.</strong></p>
<h4 id="default-approach-direct-resources"><strong>Default Approach: Direct Resources</strong><a class="headerlink" href="#default-approach-direct-resources" title="Permanent link">&para;</a></h4>
<p><strong>Start with direct AWS resources unless there's a compelling reason for a module:</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1">#  PREFERRED - Direct resource creation</span>
<span class="kr">resource</span><span class="w"> </span><span class="nc">&quot;aws_eks_cluster&quot;</span><span class="w"> </span><span class="nv">&quot;main&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="na">name</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="nv">local.cluster_name</span>
<span class="w">  </span><span class="na">role_arn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">aws_iam_role.cluster.arn</span>
<span class="w">  </span><span class="na">version</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="nv">var.kubernetes_version</span>

<span class="w">  </span><span class="nb">vpc_config</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="na">subnet_ids</span><span class="w">              </span><span class="o">=</span><span class="w"> </span><span class="nv">var.existing_service_subnets</span>
<span class="w">    </span><span class="na">endpoint_private_access</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">var.eks_cluster_private_access</span>
<span class="w">    </span><span class="na">endpoint_public_access</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="nv">var.eks_cluster_public_access</span>
<span class="w">    </span><span class="na">public_access_cidrs</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="nv">var.eks_cluster_public_access_cidrs</span>
<span class="w">  </span><span class="p">}</span>

<span class="c1">  # Direct configuration gives us full control</span>
<span class="p">}</span>

<span class="c1">#  AVOID - Remote module dependency</span>
<span class="kr">module</span><span class="w"> </span><span class="nv">&quot;eks&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="na">source</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;registry.terraform.io/example/eks/aws&quot;</span>
<span class="c1">  # Adds complexity, version dependencies, limited customization</span>
<span class="p">}</span>
</code></pre></div>
<h4 id="when-remote-modules-add-complexity"><strong>When Remote Modules Add Complexity</strong><a class="headerlink" href="#when-remote-modules-add-complexity" title="Permanent link">&para;</a></h4>
<p><strong>Common issues we've encountered with remote modules:</strong></p>
<ul>
<li><strong>Version conflicts</strong>: Remote modules pin provider versions that conflict with our requirements</li>
<li><strong>Limited customization</strong>: Remote modules don't expose the exact configuration we need</li>
<li><strong>Bug dependencies</strong>: Waiting for upstream fixes when we could implement directly</li>
<li><strong>Breaking changes</strong>: Remote module updates can break our implementations</li>
<li><strong>Debugging difficulty</strong>: Issues span multiple codebases and maintainers</li>
<li><strong>Documentation gaps</strong>: Remote module docs may not cover our specific use cases</li>
</ul>
<h4 id="acceptable-remote-module-usage"><strong>Acceptable Remote Module Usage</strong><a class="headerlink" href="#acceptable-remote-module-usage" title="Permanent link">&para;</a></h4>
<p><strong>Use remote modules only when there's clear benefit:</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1">#  ACCEPTABLE - Well-established, stable modules with clear benefits</span>
<span class="kr">module</span><span class="w"> </span><span class="nv">&quot;eks_addons&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="na">source</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;registry.terraform.io/example/eks-addons/aws&quot;</span>
<span class="w">  </span><span class="na">version</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;~&gt; 2.0&quot;</span>

<span class="c1">  # Only when:</span>
<span class="c1">  # 1. Module is extremely stable and well-maintained</span>
<span class="c1">  # 2. Provides significant complexity reduction</span>
<span class="c1">  # 3. Benefits clearly outweigh the added complexity</span>
<span class="c1">  # 4. Direct implementation would be overly complex</span>
<span class="p">}</span>
</code></pre></div>
<p><strong>Criteria for acceptable remote module usage:</strong></p>
<ul>
<li><strong>Stability</strong>: Module has long track record of stability</li>
<li><strong>Maintenance</strong>: Active maintenance and responsive maintainers</li>
<li><strong>Customization</strong>: Exposes all configuration we need</li>
<li><strong>Complexity reduction</strong>: Significantly reduces code complexity</li>
<li><strong>Clear benefit</strong>: Pros outweigh cons in terms of complexity it helps resolve</li>
</ul>
<h4 id="fork-first-strategy"><strong>Fork-First Strategy</strong><a class="headerlink" href="#fork-first-strategy" title="Permanent link">&para;</a></h4>
<p><strong>When you need a remote module, fork it first:</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1">#  RECOMMENDED - Fork and customize</span>
<span class="kr">module</span><span class="w"> </span><span class="nv">&quot;custom_component&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="na">source</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;./modules/forked-module&quot;</span><span class="c1">  # Local fork</span>

<span class="c1">  # Benefits:</span>
<span class="c1">  # - Full control over changes</span>
<span class="c1">  # - No waiting for upstream fixes</span>
<span class="c1">  # - Can customize for our specific needs</span>
<span class="c1">  # - No external version dependencies</span>
<span class="p">}</span>

<span class="c1">#  AVOID - Direct remote dependency</span>
<span class="kr">module</span><span class="w"> </span><span class="nv">&quot;component&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="na">source</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;github.com/example/external-module&quot;</span>
<span class="c1">  # Creates external dependency and limits our control</span>
<span class="p">}</span>
</code></pre></div>
<p><strong>Fork-first benefits:</strong></p>
<ul>
<li><strong>Immediate fixes</strong>: Fix bugs without waiting for upstream</li>
<li><strong>Custom features</strong>: Add CGD Toolkit-specific functionality</li>
<li><strong>Version control</strong>: No external version dependency conflicts</li>
<li><strong>Stability</strong>: Changes only when we decide to update</li>
<li><strong>Documentation</strong>: We can document our specific usage patterns</li>
</ul>
<h4 id="implementation-guidelines"><strong>Implementation Guidelines</strong><a class="headerlink" href="#implementation-guidelines" title="Permanent link">&para;</a></h4>
<h5 id="for-new-modules"><strong>For New Modules</strong><a class="headerlink" href="#for-new-modules" title="Permanent link">&para;</a></h5>
<ol>
<li><strong>Start with direct resources</strong>: Always begin with AWS resources directly</li>
<li><strong>Evaluate complexity</strong>: Only consider modules if direct implementation is extremely complex</li>
<li><strong>Fork if needed</strong>: If you must use a remote module, fork it first</li>
<li><strong>Document decision</strong>: Explain why direct resources weren't sufficient</li>
</ol>
<h5 id="for-existing-modules"><strong>For Existing Modules</strong><a class="headerlink" href="#for-existing-modules" title="Permanent link">&para;</a></h5>
<ol>
<li><strong>Audit dependencies</strong>: Review existing remote module usage</li>
<li><strong>Plan replacement</strong>: Create plan to replace with direct resources</li>
<li><strong>Gradual migration</strong>: Replace remote modules incrementally</li>
<li><strong>Test thoroughly</strong>: Ensure functionality remains identical</li>
</ol>
<h5 id="code-review-checklist"><strong>Code Review Checklist</strong><a class="headerlink" href="#code-review-checklist" title="Permanent link">&para;</a></h5>
<p><strong>When reviewing PRs that add remote modules:</strong></p>
<ul>
<li>[ ] <strong>Justification provided</strong>: Clear explanation why direct resources aren't sufficient</li>
<li>[ ] <strong>Alternatives explored</strong>: Evidence that direct implementation was considered</li>
<li>[ ] <strong>Fork strategy</strong>: If remote module needed, is it forked locally?</li>
<li>[ ] <strong>Stability assessment</strong>: Is the remote module well-maintained and stable?</li>
<li>[ ] <strong>Customization needs</strong>: Does the module expose all needed configuration?</li>
<li>[ ] <strong>Version pinning</strong>: Are versions properly pinned to avoid surprises?</li>
</ul>
<h4 id="examples-of-our-approach"><strong>Examples of Our Approach</strong><a class="headerlink" href="#examples-of-our-approach" title="Permanent link">&para;</a></h4>
<h5 id="eks-cluster-creation"><strong>EKS Cluster Creation</strong><a class="headerlink" href="#eks-cluster-creation" title="Permanent link">&para;</a></h5>
<div class="highlight"><pre><span></span><code><span class="c1"># We use direct resources instead of remote EKS modules</span>
<span class="kr">resource</span><span class="w"> </span><span class="nc">&quot;aws_eks_cluster&quot;</span><span class="w"> </span><span class="nv">&quot;main&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="c1">  # Direct control over all EKS configuration</span>
<span class="p">}</span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">&quot;aws_eks_node_group&quot;</span><span class="w"> </span><span class="nv">&quot;main&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="c1">  # Direct control over node group settings</span>
<span class="p">}</span>

<span class="c1"># Why: Remote EKS modules often don&#39;t expose the exact configuration we need</span>
<span class="c1"># for game development workloads</span>
</code></pre></div>
<h5 id="acceptable-remote-module-usage-in-core-modules"><strong>Acceptable Remote Module Usage in Core Modules</strong><a class="headerlink" href="#acceptable-remote-module-usage-in-core-modules" title="Permanent link">&para;</a></h5>
<div class="highlight"><pre><span></span><code><span class="c1"># Example: EKS add-ons where complexity reduction justifies remote module</span>
<span class="kr">module</span><span class="w"> </span><span class="nv">&quot;eks_addons&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="na">source</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;registry.terraform.io/example/eks-addons/aws&quot;</span>

<span class="c1">  # Why acceptable:</span>
<span class="c1">  # - Handles complex EKS add-on lifecycle management</span>
<span class="c1">  # - Significantly reduces implementation complexity</span>
<span class="c1">  # - Well-maintained with responsive maintainers</span>
<span class="c1">  # - Benefits clearly outweigh the dependency costs</span>
<span class="p">}</span>

<span class="c1"># We still prefer direct resources for core EKS cluster</span>
<span class="kr">resource</span><span class="w"> </span><span class="nc">&quot;aws_eks_cluster&quot;</span><span class="w"> </span><span class="nv">&quot;main&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="c1">  # Direct control for primary resources</span>
<span class="p">}</span>
</code></pre></div>
<h5 id="vpc-usage-in-examples"><strong>VPC Usage in Examples</strong><a class="headerlink" href="#vpc-usage-in-examples" title="Permanent link">&para;</a></h5>
<div class="highlight"><pre><span></span><code><span class="c1"># In examples, we may use well-established modules for convenience</span>
<span class="kr">module</span><span class="w"> </span><span class="nv">&quot;vpc&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="na">source</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;registry.terraform.io/example/vpc/aws&quot;</span>
<span class="c1">  # Acceptable in examples for user convenience</span>
<span class="c1">  # Users can replace with their own VPC implementation</span>
<span class="p">}</span>
</code></pre></div>
<h4 id="migration-strategy"><strong>Migration Strategy</strong><a class="headerlink" href="#migration-strategy" title="Permanent link">&para;</a></h4>
<p><strong>For modules currently using remote dependencies:</strong></p>
<ol>
<li><strong>Identify usage</strong>: Audit current remote module usage</li>
<li><strong>Assess impact</strong>: Determine complexity of direct implementation</li>
<li><strong>Create timeline</strong>: Plan gradual migration to direct resources</li>
<li><strong>Maintain compatibility</strong>: Ensure variable interfaces remain stable</li>
<li><strong>Document changes</strong>: Update examples and documentation</li>
</ol>
<p><strong>This approach ensures:</strong></p>
<ul>
<li><strong>Full control</strong>: We control all aspects of resource creation</li>
<li><strong>Faster iteration</strong>: No waiting for upstream changes</li>
<li><strong>Reduced complexity</strong>: Fewer dependencies to manage</li>
<li><strong>Better debugging</strong>: All code is within our control</li>
<li><strong>Customization freedom</strong>: Can modify resources for game development needs</li>
</ul>
<h3 id="centralized-logging-design-patterns"><strong>Centralized Logging Design Patterns</strong><a class="headerlink" href="#centralized-logging-design-patterns" title="Permanent link">&para;</a></h3>
<p><strong>CGD Toolkit modules standardize on centralized logging for visibility and troubleshooting.</strong></p>
<h4 id="logging-philosophy"><strong>Logging Philosophy</strong><a class="headerlink" href="#logging-philosophy" title="Permanent link">&para;</a></h4>
<p><strong>All modules provide optional centralized logging with intelligent categorization:</strong></p>
<ul>
<li><strong>User controlled</strong>: Users can enable as much logging as desired for maximum visibility</li>
<li><strong>CloudWatch standardization</strong>: Native AWS logging service as the foundation</li>
<li><strong>Monitoring flexibility</strong>: Any monitoring solution that supports CloudWatch Logs can be used</li>
<li><strong>Intelligent categorization</strong>: Logs grouped by infrastructure, application, and service layers</li>
<li><strong>Cost conscious</strong>: Configurable retention periods with sensible defaults</li>
<li><strong>Security by default</strong>: Proper IAM permissions and encryption</li>
</ul>
<p><strong>Why CloudWatch Logs</strong>: We standardize on CloudWatch Logs as the native AWS logging service. From there, customers can integrate with any monitoring solution they prefer - Grafana, Datadog, Splunk, New Relic, or custom solutions. This approach provides maximum flexibility while ensuring consistent log collection.</p>
<h4 id="three-tier-logging-structure"><strong>Three-Tier Logging Structure</strong><a class="headerlink" href="#three-tier-logging-structure" title="Permanent link">&para;</a></h4>
<p><strong>Logs are categorized into three distinct tiers:</strong></p>
<h5 id="infrastructure-logs"><strong>Infrastructure Logs</strong><a class="headerlink" href="#infrastructure-logs" title="Permanent link">&para;</a></h5>
<p><strong>AWS managed services and infrastructure components:</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1"># Infrastructure category maps to AWS services</span>
<span class="nb">infrastructure</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="s2">&quot;nlb&quot;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{}</span><span class="c1">     # Network Load Balancer access logs</span>
<span class="w">  </span><span class="s2">&quot;alb&quot;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{}</span><span class="c1">     # Application Load Balancer access logs</span>
<span class="w">  </span><span class="s2">&quot;eks&quot;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{}</span><span class="c1">     # EKS control plane logs</span>
<span class="w">  </span><span class="s2">&quot;rds&quot;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{}</span><span class="c1">     # RDS database logs (when applicable)</span>
<span class="p">}</span>
</code></pre></div>
<p><strong>Examples by module:</strong></p>
<ul>
<li><strong>DDC Module</strong>: NLB access logs, EKS control plane logs</li>
<li><strong>Perforce Module</strong>: NLB/ALB access logs, EKS control plane logs, RDS logs</li>
<li><strong>Jenkins Module</strong>: ALB access logs, EKS control plane logs</li>
</ul>
<h5 id="application-logs"><strong>Application Logs</strong><a class="headerlink" href="#application-logs" title="Permanent link">&para;</a></h5>
<p><strong>Core business logic of the primary application:</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1"># Application category maps to primary service</span>
<span class="nb">application</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="s2">&quot;ddc&quot;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{}</span><span class="c1">       # DDC service logs (DDC module)</span>
<span class="w">  </span><span class="s2">&quot;perforce&quot;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{}</span><span class="c1">  # Perforce server logs (Perforce module)</span>
<span class="w">  </span><span class="s2">&quot;jenkins&quot;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{}</span><span class="c1">   # Jenkins controller logs (Jenkins module)</span>
<span class="p">}</span>
</code></pre></div>
<p><strong>Examples:</strong></p>
<ul>
<li><strong>DDC</strong>: Unreal Cloud DDC application pod logs</li>
<li><strong>Perforce</strong>: P4D server logs, Helix Core logs</li>
<li><strong>Jenkins</strong>: Jenkins controller and agent logs</li>
</ul>
<h5 id="service-logs"><strong>Service Logs</strong><a class="headerlink" href="#service-logs" title="Permanent link">&para;</a></h5>
<p><strong>Supporting services that enable the primary application:</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1"># Service category maps to supporting components</span>
<span class="nb">service</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="s2">&quot;scylla&quot;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{}</span><span class="c1">    # ScyllaDB database logs (DDC module)</span>
<span class="w">  </span><span class="s2">&quot;p4-auth&quot;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{}</span><span class="c1">   # Perforce authentication service (Perforce module)</span>
<span class="w">  </span><span class="s2">&quot;p4-review&quot;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{}</span><span class="c1"> # Perforce code review service (Perforce module)</span>
<span class="p">}</span>
</code></pre></div>
<p><strong>Examples:</strong></p>
<ul>
<li><strong>DDC</strong>: ScyllaDB database logs</li>
<li><strong>Perforce</strong>: P4-auth service, P4-code-review service</li>
<li><strong>Jenkins</strong>: Supporting databases, caches, or queues</li>
</ul>
<h4 id="standard-logging-variable-pattern"><strong>Standard Logging Variable Pattern</strong><a class="headerlink" href="#standard-logging-variable-pattern" title="Permanent link">&para;</a></h4>
<p><strong>All modules implement consistent logging configuration:</strong></p>
<div class="highlight"><pre><span></span><code><span class="kr">variable</span><span class="w"> </span><span class="nv">&quot;centralized_logging&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="na">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">object</span><span class="p">({</span>
<span class="w">    </span><span class="na">infrastructure</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">optional</span><span class="p">(</span><span class="nf">map</span><span class="p">(</span><span class="kt">object</span><span class="p">({</span>
<span class="w">      </span><span class="na">enabled</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="err">optional</span><span class="p">(</span><span class="kt">bool</span><span class="p">,</span><span class="w"> </span><span class="no">true</span><span class="p">)</span>
<span class="w">      </span><span class="na">retention_days</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">optional</span><span class="p">(</span><span class="kt">number</span><span class="p">,</span><span class="w"> </span><span class="m">90</span><span class="p">)</span>
<span class="w">    </span><span class="p">})),</span><span class="w"> </span><span class="p">{})</span>
<span class="w">    </span><span class="na">application</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">optional</span><span class="p">(</span><span class="nf">map</span><span class="p">(</span><span class="kt">object</span><span class="p">({</span>
<span class="w">      </span><span class="na">enabled</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="err">optional</span><span class="p">(</span><span class="kt">bool</span><span class="p">,</span><span class="w"> </span><span class="no">true</span><span class="p">)</span>
<span class="w">      </span><span class="na">retention_days</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">optional</span><span class="p">(</span><span class="kt">number</span><span class="p">,</span><span class="w"> </span><span class="m">30</span><span class="p">)</span>
<span class="w">    </span><span class="p">})),</span><span class="w"> </span><span class="p">{})</span>
<span class="w">    </span><span class="na">service</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">optional</span><span class="p">(</span><span class="nf">map</span><span class="p">(</span><span class="kt">object</span><span class="p">({</span>
<span class="w">      </span><span class="na">enabled</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="err">optional</span><span class="p">(</span><span class="kt">bool</span><span class="p">,</span><span class="w"> </span><span class="no">true</span><span class="p">)</span>
<span class="w">      </span><span class="na">retention_days</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">optional</span><span class="p">(</span><span class="kt">number</span><span class="p">,</span><span class="w"> </span><span class="m">60</span><span class="p">)</span>
<span class="w">    </span><span class="p">})),</span><span class="w"> </span><span class="p">{})</span>
<span class="w">    </span><span class="na">log_group_prefix</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">optional</span><span class="p">(</span><span class="kt">string</span><span class="p">,</span><span class="w"> </span><span class="kt">null</span><span class="p">)</span>
<span class="w">  </span><span class="p">})</span>

<span class="w">  </span><span class="na">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;Centralized logging configuration by category&quot;</span>
<span class="w">  </span><span class="na">default</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">null</span>
<span class="p">}</span>
</code></pre></div>
<h4 id="log-group-naming-convention"><strong>Log Group Naming Convention</strong><a class="headerlink" href="#log-group-naming-convention" title="Permanent link">&para;</a></h4>
<p><strong>Consistent naming across all modules:</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1"># Pattern: {log_group_prefix}/{category}/{component}</span>
<span class="c1"># Default prefix: &quot;{project_prefix}-{service_name}-{region}&quot;</span>

<span class="c1"># Examples:</span>
<span class="c1"># cgd-unreal-cloud-ddc-us-east-1/infrastructure/nlb</span>
<span class="c1"># cgd-unreal-cloud-ddc-us-east-1/application/ddc</span>
<span class="c1"># cgd-unreal-cloud-ddc-us-east-1/service/scylla</span>

<span class="c1"># cgd-perforce-us-west-2/infrastructure/alb</span>
<span class="c1"># cgd-perforce-us-west-2/application/perforce</span>
<span class="c1"># cgd-perforce-us-west-2/service/p4-auth</span>
</code></pre></div>
<h4 id="usage-examples"><strong>Usage Examples</strong><a class="headerlink" href="#usage-examples" title="Permanent link">&para;</a></h4>
<h5 id="enable-all-logging-with-defaults"><strong>Enable All Logging with Defaults</strong><a class="headerlink" href="#enable-all-logging-with-defaults" title="Permanent link">&para;</a></h5>
<div class="highlight"><pre><span></span><code><span class="kr">module</span><span class="w"> </span><span class="nv">&quot;ddc&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nb">centralized_logging</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nb">infrastructure</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nb">nlb</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{},</span><span class="w"> </span><span class="nb">eks</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{}</span><span class="w"> </span><span class="p">}</span>
<span class="w">    </span><span class="nb">application</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nb">ddc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{}</span><span class="w"> </span><span class="p">}</span>
<span class="w">    </span><span class="nb">service</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nb">scylla</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{}</span><span class="w"> </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h5 id="custom-retention-and-prefix"><strong>Custom Retention and Prefix</strong><a class="headerlink" href="#custom-retention-and-prefix" title="Permanent link">&para;</a></h5>
<div class="highlight"><pre><span></span><code><span class="kr">module</span><span class="w"> </span><span class="nv">&quot;perforce&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nb">centralized_logging</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nb">infrastructure</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nb">nlb</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="na">retention_days</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">365</span><span class="w"> </span><span class="p">}</span>
<span class="w">      </span><span class="nb">alb</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="na">retention_days</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">180</span><span class="w"> </span><span class="p">}</span>
<span class="w">      </span><span class="nb">eks</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="na">retention_days</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">90</span><span class="w"> </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="nb">application</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nb">perforce</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="na">retention_days</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">60</span><span class="w"> </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="nb">service</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="s2">&quot;p4-auth&quot;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="na">retention_days</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">30</span><span class="w"> </span><span class="p">}</span>
<span class="w">      </span><span class="s2">&quot;p4-review&quot;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="na">retention_days</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">30</span><span class="w"> </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="na">log_group_prefix</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;mycompany-perforce-prod&quot;</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h5 id="selective-logging"><strong>Selective Logging</strong><a class="headerlink" href="#selective-logging" title="Permanent link">&para;</a></h5>
<div class="highlight"><pre><span></span><code><span class="kr">module</span><span class="w"> </span><span class="nv">&quot;jenkins&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nb">centralized_logging</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nb">infrastructure</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nb">alb</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="na">enabled</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">false</span><span class="w"> </span><span class="p">}</span><span class="c1">  # Disable ALB logging</span>
<span class="w">      </span><span class="nb">eks</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{}</span><span class="c1">                   # Enable EKS logging only</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="nb">application</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nb">jenkins</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{}</span><span class="w"> </span><span class="p">}</span>
<span class="c1">    # No service logging needed for this deployment</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h4 id="default-retention-periods"><strong>Default Retention Periods</strong><a class="headerlink" href="#default-retention-periods" title="Permanent link">&para;</a></h4>
<p><strong>Cost-optimized defaults based on log type:</strong></p>
<ul>
<li><strong>Infrastructure</strong>: 90 days (AWS service troubleshooting)</li>
<li><strong>Application</strong>: 30 days (balance between debugging and cost)</li>
<li><strong>Service</strong>: 60 days (database analysis and performance tuning)</li>
</ul>
<h4 id="module-specific-logging-patterns"><strong>Module-Specific Logging Patterns</strong><a class="headerlink" href="#module-specific-logging-patterns" title="Permanent link">&para;</a></h4>
<p><strong>Not all modules fit the standard 3-tier structure. Modules should only create log groups for components they actually have.</strong></p>
<h5 id="single-category-pattern-vdi-module-example"><strong>Single Category Pattern (VDI Module Example)</strong><a class="headerlink" href="#single-category-pattern-vdi-module-example" title="Permanent link">&para;</a></h5>
<p><strong>When modules have simple architectures where everything happens in one place:</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1"># VDI Module - Single log group for all activities</span>
<span class="kr">resource</span><span class="w"> </span><span class="nc">&quot;aws_cloudwatch_log_group&quot;</span><span class="w"> </span><span class="nv">&quot;vdi_logs&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="na">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;/${var.project_prefix}/vdi/logs&quot;</span>
<span class="c1">  # All VDI activity: SSM execution, user creation, DCV sessions, software installation</span>
<span class="p">}</span>
</code></pre></div>
<p><strong>Use single category when:</strong></p>
<ul>
<li>All functionality runs on same compute (EC2 instances)</li>
<li>SSM-based architecture where everything logs to same destination</li>
<li>No separate infrastructure services to log</li>
<li>Simpler structure matches module reality</li>
</ul>
<h5 id="standard-3-tier-pattern-ddcperforce-module-example"><strong>Standard 3-Tier Pattern (DDC/Perforce Module Example)</strong><a class="headerlink" href="#standard-3-tier-pattern-ddcperforce-module-example" title="Permanent link">&para;</a></h5>
<p><strong>When modules have distinct infrastructure, application, and service components:</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1"># Standard pattern for complex modules</span>
<span class="nb">infrastructure</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="s2">&quot;nlb&quot;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{},</span><span class="w"> </span><span class="s2">&quot;eks&quot;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{}</span><span class="w"> </span><span class="p">}</span>
<span class="nb">application</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="s2">&quot;ddc&quot;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{}</span><span class="w"> </span><span class="p">}</span>
<span class="nb">service</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="s2">&quot;scylla&quot;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{}</span><span class="w"> </span><span class="p">}</span>
</code></pre></div>
<p><strong>Principle</strong>: Match logging structure to module architecture, not arbitrary standards.</p>
<h4 id="implementation-requirements"><strong>Implementation Requirements</strong><a class="headerlink" href="#implementation-requirements" title="Permanent link">&para;</a></h4>
<p><strong>All modules must implement:</strong></p>
<ul>
<li><strong>CloudWatch Log Groups</strong>: Created for each enabled component</li>
<li><strong>Proper IAM permissions</strong>: Services can write to their log groups</li>
<li><strong>S3 integration</strong>: Long-term storage with lifecycle policies</li>
<li><strong>Encryption</strong>: Log groups encrypted with appropriate KMS keys</li>
<li><strong>Validation</strong>: Only supported components allowed per module</li>
<li><strong>Documentation</strong>: Clear explanation of what each component logs</li>
</ul>
<h4 id="component-validation"><strong>Component Validation</strong><a class="headerlink" href="#component-validation" title="Permanent link">&para;</a></h4>
<p><strong>Modules validate only supported components:</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1"># Each module validates its specific supported components</span>
<span class="nb">validation</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="na">condition</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">alltrue</span><span class="p">([</span>
<span class="c1">    # Infrastructure: only components this module actually creates</span>
<span class="w">    </span><span class="nf">alltrue</span><span class="p">([</span>
<span class="w">      </span><span class="err">for</span><span class="w"> </span><span class="err">component</span><span class="w"> </span><span class="err">in</span><span class="w"> </span><span class="nf">keys</span><span class="p">(</span><span class="nv">var.centralized_logging.infrastructure</span><span class="p">)</span><span class="w"> </span><span class="p">:</span>
<span class="w">      </span><span class="nf">contains</span><span class="p">([</span><span class="s2">&quot;nlb&quot;, &quot;eks&quot;</span><span class="p">],</span><span class="w"> </span><span class="err">component</span><span class="p">)</span><span class="c1">  # DDC module example</span>
<span class="w">    </span><span class="p">]),</span>
<span class="c1">    # Application: only the primary service</span>
<span class="w">    </span><span class="nf">alltrue</span><span class="p">([</span>
<span class="w">      </span><span class="err">for</span><span class="w"> </span><span class="err">component</span><span class="w"> </span><span class="err">in</span><span class="w"> </span><span class="nf">keys</span><span class="p">(</span><span class="nv">var.centralized_logging.application</span><span class="p">)</span><span class="w"> </span><span class="p">:</span>
<span class="w">      </span><span class="nf">contains</span><span class="p">([</span><span class="s2">&quot;ddc&quot;</span><span class="p">],</span><span class="w"> </span><span class="err">component</span><span class="p">)</span><span class="c1">  # DDC module example</span>
<span class="w">    </span><span class="p">]),</span>
<span class="c1">    # Service: only supporting services this module deploys</span>
<span class="w">    </span><span class="nf">alltrue</span><span class="p">([</span>
<span class="w">      </span><span class="err">for</span><span class="w"> </span><span class="err">component</span><span class="w"> </span><span class="err">in</span><span class="w"> </span><span class="nf">keys</span><span class="p">(</span><span class="nv">var.centralized_logging.service</span><span class="p">)</span><span class="w"> </span><span class="p">:</span>
<span class="w">      </span><span class="nf">contains</span><span class="p">([</span><span class="s2">&quot;scylla&quot;</span><span class="p">],</span><span class="w"> </span><span class="err">component</span><span class="p">)</span><span class="c1">  # DDC module example</span>
<span class="w">    </span><span class="p">])</span>
<span class="w">  </span><span class="p">])</span>
<span class="w">  </span><span class="na">error_message</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;Unsupported logging component specified for this module.&quot;</span>
<span class="p">}</span>
</code></pre></div>
<h4 id="cost-considerations"><strong>Cost Considerations</strong><a class="headerlink" href="#cost-considerations" title="Permanent link">&para;</a></h4>
<p><strong>Logging configuration balances visibility with cost:</strong></p>
<ul>
<li><strong>Shorter retention = lower costs</strong>: Adjust based on compliance needs</li>
<li><strong>Selective enablement</strong>: Disable non-critical logging in development</li>
<li><strong>S3 lifecycle policies</strong>: Automatic transition to cheaper storage classes</li>
<li><strong>Log sampling</strong>: Consider sampling for high-volume logs</li>
</ul>
<h4 id="security-and-compliance"><strong>Security and Compliance</strong><a class="headerlink" href="#security-and-compliance" title="Permanent link">&para;</a></h4>
<p><strong>All logging implementations include:</strong></p>
<ul>
<li><strong>Encryption at rest</strong>: CloudWatch logs encrypted with KMS</li>
<li><strong>IAM least privilege</strong>: Services only access their specific log groups</li>
<li><strong>VPC Flow Logs</strong>: Optional for network troubleshooting</li>
<li><strong>Audit trails</strong>: CloudTrail integration for API calls</li>
<li><strong>Data retention</strong>: Configurable retention for compliance requirements</li>
</ul>
<h4 id="future-cgd-toolkit-monitoring-module"><strong>Future: CGD Toolkit Monitoring Module</strong><a class="headerlink" href="#future-cgd-toolkit-monitoring-module" title="Permanent link">&para;</a></h4>
<p><strong>We're actively developing a comprehensive monitoring module:</strong></p>
<ul>
<li><strong>Amazon Managed Grafana</strong>: Dashboard solution consuming CloudWatch Logs</li>
<li><strong>Game tooling infrastructure</strong>: Monitor VDI instances, Perforce, DDC, Jenkins, and more</li>
<li><strong>Multi-region support</strong>: Unified monitoring across all regional deployments</li>
<li><strong>Optional integration</strong>: Use with any CGD Toolkit modules that have logging enabled</li>
<li><strong>No ETA yet</strong>: Still in development, but will leverage our CloudWatch Logs foundation</li>
</ul>
<p><strong>Design principle</strong>: Since all CGD Toolkit modules send logs to CloudWatch Logs when enabled, any monitoring solution that supports CloudWatch integration can be used - whether it's our future monitoring module, Amazon Managed Grafana, Datadog, Splunk, or custom solutions.</p>
<p><strong>This standardized approach provides:</strong></p>
<ul>
<li><strong>Maximum visibility</strong>: Users control how much logging they want enabled</li>
<li><strong>Consistent logging</strong>: Same patterns across all CGD Toolkit modules</li>
<li><strong>Monitoring flexibility</strong>: Works with any CloudWatch-compatible monitoring solution</li>
<li><strong>Operational visibility</strong>: Comprehensive logging for troubleshooting</li>
<li><strong>Cost control</strong>: Configurable retention and selective enablement</li>
<li><strong>Security compliance</strong>: Proper encryption and access controls</li>
<li><strong>Future-ready</strong>: Foundation for CGD Toolkit monitoring module and other solutions</li>
</ul>
<h3 id="naming-strategy"><strong>Naming Strategy</strong><a class="headerlink" href="#naming-strategy" title="Permanent link">&para;</a></h3>
<p><strong>Why</strong>: AWS services have different naming patterns when using prefixes. Our approach provides predictable, referenceable names.</p>
<div class="highlight"><pre><span></span><code><span class="kr">resource</span><span class="w"> </span><span class="nc">&quot;random_id&quot;</span><span class="w"> </span><span class="nv">&quot;suffix&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="na">byte_length</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">4</span>
<span class="w">  </span><span class="nb">keepers</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="na">project_prefix</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">var.project_prefix</span>
<span class="w">    </span><span class="na">name</span><span class="w">          </span><span class="o">=</span><span class="w"> </span><span class="nv">local.name</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>

<span class="nb">locals</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="na">name_prefix</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;${var.project_prefix}-${local.name}&quot;</span>
<span class="w">  </span><span class="na">name_suffix</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">random_id.suffix.hex</span>

<span class="c1">  # Predictable names across all resources</span>
<span class="w">  </span><span class="na">nlb_name</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;${local.name_prefix}-nlb-${local.name_suffix}&quot;</span>
<span class="w">  </span><span class="na">bucket_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;${local.name_prefix}-logs-${local.name_suffix}&quot;</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="load-balancer-philosophy"><strong>Load Balancer Philosophy</strong><a class="headerlink" href="#load-balancer-philosophy" title="Permanent link">&para;</a></h3>
<p><strong>Why</strong>: Game services often need Layer 4 (NLB) for performance. ALB adds value for HTTP/HTTPS routing scenarios.</p>
<ul>
<li><strong>NLB</strong>: Always available, required for most modules</li>
<li><strong>ALB</strong>: Optional, module-specific validation prevents unsupported usage</li>
</ul>
<h3 id="dns-patterns_1"><strong>DNS Patterns</strong><a class="headerlink" href="#dns-patterns_1" title="Permanent link">&para;</a></h3>
<p><strong>Why Regional</strong>: Like AWS services, we default to regional endpoints for performance, isolation, and explicit control.</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Regional endpoints (our default)</span>
<span class="c1"># us-east-1.ddc.company.com</span>
<span class="c1"># us-west-2.ddc.company.com</span>

<span class="c1"># Users can add global endpoints for DR/geolocation</span>
<span class="c1"># ddc.company.com -&gt; failover routing to regional endpoints</span>
</code></pre></div>
<h2 id="security-patterns">Security Patterns<a class="headerlink" href="#security-patterns" title="Permanent link">&para;</a></h2>
<h3 id="the-00000-rule"><strong>The 0.0.0.0/0 Rule</strong><a class="headerlink" href="#the-00000-rule" title="Permanent link">&para;</a></h3>
<h4 id="ingress-incoming-avoid-00000"><strong>Ingress (Incoming) - Avoid 0.0.0.0/0</strong><a class="headerlink" href="#ingress-incoming-avoid-00000" title="Permanent link">&para;</a></h4>
<p><strong>Risk</strong>:  <strong>HIGH</strong> - Direct attack surface</p>
<div class="highlight"><pre><span></span><code><span class="c1">#  DANGEROUS</span>
<span class="kr">resource</span><span class="w"> </span><span class="nc">&quot;aws_vpc_security_group_ingress_rule&quot;</span><span class="w"> </span><span class="nv">&quot;bad&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="na">cidr_ipv4</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;0.0.0.0/0&quot;</span><span class="c1">  # Opens to entire internet</span>
<span class="p">}</span>

<span class="c1">#  USER CONTROLLED</span>
<span class="c1"># Users provide security groups with their own rules</span>
</code></pre></div>
<h4 id="egress-outgoing-often-necessary"><strong>Egress (Outgoing) - Often Necessary</strong><a class="headerlink" href="#egress-outgoing-often-necessary" title="Permanent link">&para;</a></h4>
<p><strong>Risk</strong>:  <strong>MEDIUM</strong> - Controlled by application</p>
<div class="highlight"><pre><span></span><code><span class="c1">#  NECESSARY for AWS APIs, updates, container registries</span>
<span class="kr">resource</span><span class="w"> </span><span class="nc">&quot;aws_vpc_security_group_egress_rule&quot;</span><span class="w"> </span><span class="nv">&quot;aws_apis&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="na">cidr_ipv4</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;0.0.0.0/0&quot;</span>
<span class="w">  </span><span class="na">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;AWS APIs, ECR, OS updates&quot;</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="implementation-pattern"><strong>Implementation Pattern</strong><a class="headerlink" href="#implementation-pattern" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># We create internal security groups</span>
<span class="kr">resource</span><span class="w"> </span><span class="nc">&quot;aws_security_group&quot;</span><span class="w"> </span><span class="nv">&quot;internal&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="na">name_prefix</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;${local.name_prefix}-internal-&quot;</span>
<span class="w">  </span><span class="na">vpc_id</span><span class="w">      </span><span class="o">=</span><span class="w"> </span><span class="nv">var.vpc_id</span>
<span class="p">}</span>

<span class="c1"># Users control external access</span>
<span class="kr">resource</span><span class="w"> </span><span class="nc">&quot;aws_lb&quot;</span><span class="w"> </span><span class="nv">&quot;nlb&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="na">security_groups</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">concat</span><span class="p">(</span>
<span class="w">    </span><span class="nv">var.security_groups</span><span class="p">,</span><span class="c1">                           # User-controlled</span>
<span class="w">    </span><span class="nv">var.additional_security_groups.load_balancer</span><span class="p">,</span><span class="c1"> # Component-specific</span>
<span class="w">    </span><span class="p">[</span><span class="nv">aws_security_group.internal.id</span><span class="p">]</span><span class="c1">              # Internal</span>
<span class="w">  </span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div>
<h2 id="provider-patterns">Provider Patterns<a class="headerlink" href="#provider-patterns" title="Permanent link">&para;</a></h2>
<h3 id="provider-strategy-root-vs-parent-vs-submodules"><strong>Provider Strategy: Root vs Parent vs Submodules</strong><a class="headerlink" href="#provider-strategy-root-vs-parent-vs-submodules" title="Permanent link">&para;</a></h3>
<p><strong>Why This Matters</strong>: Provider configuration depends on where Terraform runs and how modules are consumed.</p>
<p><strong>Module Consumption</strong>: We assume users will reference CGD modules remotely via Git URLs, but they could also clone/fork the toolkit and deploy from examples directories directly.</p>
<h4 id="root-module-where-terraform-init-runs"><strong>Root Module (Where <code>terraform init</code> Runs)</strong><a class="headerlink" href="#root-module-where-terraform-init-runs" title="Permanent link">&para;</a></h4>
<p><strong>Scenario</strong>: Users run Terraform commands here - examples, user's own infrastructure</p>
<div class="highlight"><pre><span></span><code><span class="c1"># examples/single-region-basic/versions.tf</span>
<span class="nb">terraform</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nb">required_providers</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nb">aws</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="na">source</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;hashicorp/aws&quot;, version = &quot;&gt;= 6.0.0&quot;</span><span class="w"> </span><span class="p">}</span>
<span class="w">    </span><span class="nb">kubernetes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="na">source</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;hashicorp/kubernetes&quot;, version = &quot;&gt;= 2.33.0&quot;</span><span class="w"> </span><span class="p">}</span>
<span class="w">    </span><span class="nb">helm</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="na">source</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;hashicorp/helm&quot;, version = &quot;&gt;= 2.16.0, &lt; 3.0.0&quot;</span><span class="w"> </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>

<span class="c1"># examples/single-region-basic/providers.tf (when needed)</span>
<span class="kr">provider</span><span class="w"> </span><span class="nv">&quot;kubernetes&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="na">host</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">module.ddc.cluster_endpoint</span>
<span class="w">  </span><span class="na">cluster_ca_certificate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">base64decode</span><span class="p">(</span><span class="nv">module.ddc.cluster_ca_data</span><span class="p">)</span>
<span class="w">  </span><span class="nb">exec</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="na">api_version</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;client.authentication.k8s.io/v1beta1&quot;</span>
<span class="w">    </span><span class="na">command</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;aws&quot;</span>
<span class="w">    </span><span class="na">args</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;eks&quot;, &quot;get-token&quot;, &quot;--cluster-name&quot;</span><span class="p">,</span><span class="w"> </span><span class="nv">module.ddc.cluster_name</span><span class="p">]</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h4 id="parent-module-cgd-toolkit-modules"><strong>Parent Module (CGD Toolkit Modules)</strong><a class="headerlink" href="#parent-module-cgd-toolkit-modules" title="Permanent link">&para;</a></h4>
<p><strong>Scenario</strong>: CGD Toolkit modules that both create resources AND orchestrate submodules when needed</p>
<p><strong>Single Region (Simple)</strong>:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># modules/unreal-cloud-ddc/main.tf</span>
<span class="c1"># Parent module creates some resources directly AND orchestrates submodules</span>
<span class="c1"># Parent module receives providers from root module</span>

<span class="c1"># Direct resource creation</span>
<span class="kr">resource</span><span class="w"> </span><span class="nc">&quot;aws_route53_zone&quot;</span><span class="w"> </span><span class="nv">&quot;private&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="na">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;${var.project_prefix}.internal&quot;</span>
<span class="w">  </span><span class="nb">vpc</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="na">vpc_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">var.vpc_id</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>

<span class="c1"># Submodule orchestration</span>

<span class="kr">module</span><span class="w"> </span><span class="nv">&quot;infra&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="na">source</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;./modules/infra&quot;</span>
<span class="w">  </span><span class="nb">providers</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="na">aws</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">aws</span><span class="w"> </span><span class="p">}</span><span class="c1">  # Pass from root (uses default or v6 region)</span>
<span class="p">}</span>

<span class="kr">module</span><span class="w"> </span><span class="nv">&quot;services&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="na">source</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;./modules/services&quot;</span>
<span class="w">  </span><span class="nb">providers</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="na">kubernetes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">kubernetes</span><span class="p">,</span><span class="w"> </span><span class="na">helm</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">helm</span><span class="w"> </span><span class="p">}</span><span class="c1">  # Pass from root</span>
<span class="w">  </span><span class="na">depends_on</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="nv">module.infra</span><span class="p">]</span>
<span class="p">}</span>
</code></pre></div>
<p><strong>Multi-Region (Complex)</strong>:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Root module: examples/multi-region/main.tf</span>
<span class="c1"># User must handle multi-region complexity at root level</span>

<span class="c1"># AWS Provider v6 - No aliases needed!</span>
<span class="kr">module</span><span class="w"> </span><span class="nv">&quot;ddc_us_east_1&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="na">source</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;git::https://github.com/aws-games/cloud-game-development-toolkit.git//modules/unreal/unreal-cloud-ddc&quot;</span>
<span class="w">  </span><span class="na">region</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;us-east-1&quot;</span><span class="c1">  # AWS Provider v6 handles this automatically</span>

<span class="c1">  # Non-enhanced providers need explicit aliases</span>
<span class="w">  </span><span class="nb">providers</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="na">kubernetes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">kubernetes.us_east_1</span>
<span class="w">    </span><span class="na">helm</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="nv">helm.us_east_1</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>

<span class="kr">module</span><span class="w"> </span><span class="nv">&quot;ddc_us_west_2&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="na">source</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;git::https://github.com/aws-games/cloud-game-development-toolkit.git//modules/unreal/unreal-cloud-ddc&quot;</span>
<span class="w">  </span><span class="na">region</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;us-west-2&quot;</span><span class="c1">  # AWS Provider v6 handles this automatically</span>

<span class="c1">  # Non-enhanced providers need explicit aliases</span>
<span class="w">  </span><span class="nb">providers</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="na">kubernetes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">kubernetes.us_west_2</span>
<span class="w">    </span><span class="na">helm</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="nv">helm.us_west_2</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>

<span class="c1"># Root module must define all provider aliases</span>
<span class="kr">provider</span><span class="w"> </span><span class="nv">&quot;kubernetes&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="na">alias</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;us_east_1&quot;</span>
<span class="w">  </span><span class="na">host</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">module.ddc_us_east_1.cluster_endpoint</span>
<span class="c1">  # ... configuration</span>
<span class="p">}</span>

<span class="kr">provider</span><span class="w"> </span><span class="nv">&quot;kubernetes&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="na">alias</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;us_west_2&quot;</span>
<span class="w">  </span><span class="na">host</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">module.ddc_us_west_2.cluster_endpoint</span>
<span class="c1">  # ... configuration</span>
<span class="p">}</span>
</code></pre></div>
<h4 id="submodules"><strong>Submodules</strong><a class="headerlink" href="#submodules" title="Permanent link">&para;</a></h4>
<p><strong>Scenario</strong>: Receive providers from parent, use specific provider family</p>
<div class="highlight"><pre><span></span><code><span class="c1"># modules/unreal-cloud-ddc/modules/infra/main.tf</span>
<span class="c1"># Uses AWS provider passed from parent</span>
<span class="kr">resource</span><span class="w"> </span><span class="nc">&quot;aws_eks_cluster&quot;</span><span class="w"> </span><span class="nv">&quot;main&quot;</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span>

<span class="c1"># modules/unreal-cloud-ddc/modules/services/main.tf</span>
<span class="c1"># Uses Kubernetes/Helm providers passed from parent</span>
<span class="kr">resource</span><span class="w"> </span><span class="nc">&quot;helm_release&quot;</span><span class="w"> </span><span class="nv">&quot;ddc&quot;</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span>
</code></pre></div>
<h3 id="provider-value-sourcing-strategies"><strong>Provider Value Sourcing Strategies</strong><a class="headerlink" href="#provider-value-sourcing-strategies" title="Permanent link">&para;</a></h3>
<p><strong>Why This Matters</strong>: Providers need configuration values, but the source depends on timing and dependencies.</p>
<h4 id="option-1-data-sources-independent-resources"><strong>Option 1: Data Sources (Independent Resources)</strong><a class="headerlink" href="#option-1-data-sources-independent-resources" title="Permanent link">&para;</a></h4>
<p><strong>When</strong>: Referencing existing, independent infrastructure</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Root module: examples/existing-cluster/providers.tf</span>
<span class="kr">data</span><span class="w"> </span><span class="nc">&quot;aws_eks_cluster&quot;</span><span class="w"> </span><span class="nv">&quot;existing&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="na">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">var.existing_cluster_name</span>
<span class="p">}</span>

<span class="kr">data</span><span class="w"> </span><span class="nc">&quot;aws_eks_cluster_auth&quot;</span><span class="w"> </span><span class="nv">&quot;existing&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="na">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">var.existing_cluster_name</span>
<span class="p">}</span>

<span class="kr">provider</span><span class="w"> </span><span class="nv">&quot;kubernetes&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="na">host</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">data.aws_eks_cluster.existing.endpoint</span>
<span class="w">  </span><span class="na">cluster_ca_certificate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">base64decode</span><span class="p">(</span><span class="nv">data.aws_eks_cluster.existing.certificate_authority[0].data</span><span class="p">)</span>
<span class="w">  </span><span class="na">token</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">data.aws_eks_cluster_auth.existing.token</span>
<span class="p">}</span>
</code></pre></div>
<h4 id="option-2-module-outputs-dependent-resources"><strong>Option 2: Module Outputs (Dependent Resources)</strong><a class="headerlink" href="#option-2-module-outputs-dependent-resources" title="Permanent link">&para;</a></h4>
<p><strong>When</strong>: Module creates the infrastructure that providers need</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Root module: examples/single-region-basic/providers.tf</span>
<span class="kr">provider</span><span class="w"> </span><span class="nv">&quot;kubernetes&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="na">host</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">module.ddc.cluster_endpoint</span>
<span class="w">  </span><span class="na">cluster_ca_certificate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">base64decode</span><span class="p">(</span><span class="nv">module.ddc.cluster_ca_data</span><span class="p">)</span>
<span class="w">  </span><span class="nb">exec</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="na">api_version</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;client.authentication.k8s.io/v1beta1&quot;</span>
<span class="w">    </span><span class="na">command</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;aws&quot;</span>
<span class="w">    </span><span class="na">args</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;eks&quot;, &quot;get-token&quot;, &quot;--cluster-name&quot;</span><span class="p">,</span><span class="w"> </span><span class="nv">module.ddc.cluster_name</span><span class="p">]</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h4 id="option-3-statichardcoded-values"><strong>Option 3: Static/Hardcoded Values</strong><a class="headerlink" href="#option-3-statichardcoded-values" title="Permanent link">&para;</a></h4>
<p><strong>When</strong>: Known, unchanging values (rare, mostly for testing)</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Root module: tests/setup/providers.tf</span>
<span class="kr">provider</span><span class="w"> </span><span class="nv">&quot;kubernetes&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="na">host</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;https://test-cluster.example.com&quot;</span>
<span class="w">  </span><span class="na">token</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">var.test_cluster_token</span><span class="c1">  # From CI secrets</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="conditional-provider-configuration"><strong>Conditional Provider Configuration</strong><a class="headerlink" href="#conditional-provider-configuration" title="Permanent link">&para;</a></h3>
<p><strong>Why This Matters</strong>: Provider configurations are evaluated during every plan/apply. Understanding when to use <code>try()</code> vs explicit null checks is critical.</p>
<h4 id="use-try-for-data-sources"><strong>Use <code>try()</code> for Data Sources</strong><a class="headerlink" href="#use-try-for-data-sources" title="Permanent link">&para;</a></h4>
<p><strong>Why</strong>: Prevents plan failures when resources don't exist yet.</p>
<div class="highlight"><pre><span></span><code><span class="c1">#  RECOMMENDED - Graceful handling of missing resources</span>
<span class="kr">data</span><span class="w"> </span><span class="nc">&quot;aws_eks_cluster&quot;</span><span class="w"> </span><span class="nv">&quot;existing&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="na">count</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">var.cluster_name</span><span class="w"> </span><span class="p">!=</span><span class="w"> </span><span class="kt">null</span><span class="w"> </span><span class="p">?</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="m">0</span>
<span class="w">  </span><span class="na">name</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="nv">var.cluster_name</span>
<span class="p">}</span>

<span class="kr">provider</span><span class="w"> </span><span class="nv">&quot;kubernetes&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="c1">  # try() handles both missing data source AND missing attributes</span>
<span class="w">  </span><span class="na">host</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">try</span><span class="p">(</span><span class="nv">data.aws_eks_cluster.existing[0].endpoint</span><span class="p">,</span><span class="w"> </span><span class="kt">null</span><span class="p">)</span>
<span class="w">  </span><span class="na">cluster_ca_certificate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">try</span><span class="p">(</span>
<span class="w">    </span><span class="nf">base64decode</span><span class="p">(</span><span class="nv">data.aws_eks_cluster.existing[0].certificate_authority[0].data</span><span class="p">),</span>
<span class="w">    </span><span class="kt">null</span>
<span class="w">  </span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div>
<h4 id="use-explicit-null-checks-for-module-outputs-cgd-toolkit-pattern"><strong>Use Explicit Null Checks for Module Outputs (CGD Toolkit Pattern)</strong><a class="headerlink" href="#use-explicit-null-checks-for-module-outputs-cgd-toolkit-pattern" title="Permanent link">&para;</a></h4>
<p><strong>Why</strong>: Clearer dependency logic and better debugging.</p>
<div class="highlight"><pre><span></span><code><span class="c1">#  RECOMMENDED - Clear dependency logic</span>
<span class="kr">provider</span><span class="w"> </span><span class="nv">&quot;kubernetes&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="na">host</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">module.infra.cluster_endpoint</span><span class="w"> </span><span class="p">!=</span><span class="w"> </span><span class="kt">null</span><span class="w"> </span><span class="p">?</span>
<span class="w">    </span><span class="nv">module.infra.cluster_endpoint</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kt">null</span>
<span class="w">  </span><span class="na">cluster_ca_certificate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">module.infra.cluster_ca_data</span><span class="w"> </span><span class="p">!=</span><span class="w"> </span><span class="kt">null</span><span class="w"> </span><span class="p">?</span>
<span class="w">    </span><span class="nf">base64decode</span><span class="p">(</span><span class="nv">module.infra.cluster_ca_data</span><span class="p">)</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kt">null</span>

<span class="w">  </span><span class="nb">exec</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="na">api_version</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;client.authentication.k8s.io/v1beta1&quot;</span>
<span class="w">    </span><span class="na">command</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;aws&quot;</span>
<span class="w">    </span><span class="na">args</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;eks&quot;, &quot;get-token&quot;, &quot;--cluster-name&quot;</span><span class="p">,</span><span class="w"> </span><span class="nv">module.infra.cluster_name</span><span class="p">]</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="multi-region-global-replication-architecture"><strong>Multi-Region: Global Replication Architecture</strong><a class="headerlink" href="#multi-region-global-replication-architecture" title="Permanent link">&para;</a></h3>
<h4 id="standard-terraform-multi-region-patterns"><strong>Standard Terraform Multi-Region Patterns</strong><a class="headerlink" href="#standard-terraform-multi-region-patterns" title="Permanent link">&para;</a></h4>
<p><strong>How most Terraform users handle multi-region deployments:</strong></p>
<h5 id="pattern-a-monorepo-regional-structure-less-recommended"><strong>Pattern A: Monorepo Regional Structure (Less Recommended)</strong><a class="headerlink" href="#pattern-a-monorepo-regional-structure-less-recommended" title="Permanent link">&para;</a></h5>
<p><strong>One Git repository per AWS region containing ALL applications:</strong></p>
<div class="highlight"><pre><span></span><code>company-infrastructure-us-east-1/
 networking/
 databases/
 applications/
    ddc/
    perforce/
    jenkins/
 terraform.tfstate

company-infrastructure-us-west-2/
 networking/
 databases/
 applications/
    ddc/
    perforce/
    jenkins/
 terraform.tfstate
</code></pre></div>
<p><strong>Pros</strong>: Complete regional isolation
<strong>Cons</strong>: Repository proliferation, monolithic state files, team conflicts</p>
<h5 id="pattern-b-application-specific-with-regional-folders-recommended"><strong>Pattern B: Application-Specific with Regional Folders (Recommended)</strong><a class="headerlink" href="#pattern-b-application-specific-with-regional-folders-recommended" title="Permanent link">&para;</a></h5>
<p><strong>Application-specific repositories with regional deployment folders:</strong></p>
<div class="highlight"><pre><span></span><code>company-ddc-infrastructure/
 deployments/
    us-east-1/
       main.tf
       variables.tf
       terraform.tfstate
    us-west-2/
        main.tf
        variables.tf
        terraform.tfstate
 modules/
     shared-components/

company-perforce-infrastructure/
 deployments/
    us-east-1/
    us-west-2/
 modules/
</code></pre></div>
<p><strong>Pros</strong>: Application-focused ownership, separate state files, team independence
<strong>Cons</strong>: Requires coordination for cross-region features</p>
<p><strong>Why Pattern B Works Better</strong>:</p>
<ul>
<li><strong>Application ownership</strong>: Repository aligns with team responsibilities</li>
<li><strong>Separate state files</strong>: Each region has independent, manageable state</li>
<li><strong>Team independence</strong>: Teams can work on different regions simultaneously</li>
<li><strong>Focused scope</strong>: Smaller, application-specific state files</li>
<li><strong>Scalable</strong>: Multiple deployments per region possible</li>
</ul>
<h4 id="cgd-toolkit-multi-region-philosophy"><strong>CGD Toolkit Multi-Region Philosophy</strong><a class="headerlink" href="#cgd-toolkit-multi-region-philosophy" title="Permanent link">&para;</a></h4>
<p><strong>Multi-region in game development is about PERFORMANCE, not disaster recovery.</strong></p>
<p><strong>Why We're Different</strong>: Game development applications (Perforce, DDC) work perfectly in single-region but are <strong>often deployed multi-region</strong> for geographically distributed teams.</p>
<p><strong>Primary Use Case</strong>: <strong>Global Development Teams</strong></p>
<ul>
<li><strong>DDC</strong>: Works great single-region, but multi-region provides low-latency cache access for global teams</li>
<li><strong>Perforce</strong>: Perfectly functional single-region, but multi-region enables synchronized repositories across continents</li>
<li><strong>Performance-driven</strong>: Multi-region reduces latency for geographically distributed developers</li>
<li><strong>Single-region viable</strong>: Both applications work perfectly fine in single-region deployments</li>
<li><strong>Multi-region benefit</strong>: Global teams get better performance with regional data locality</li>
</ul>
<p><strong>Primary Purpose: Performance, NOT Disaster Recovery</strong>:</p>
<ul>
<li><strong>Performance-driven</strong>: Multi-region DDC/Perforce is for <strong>active global usage</strong> and low-latency access</li>
<li><strong>DR as side benefit</strong>: Cross-region replication for performance means either region <em>could</em> serve as DR</li>
<li><strong>Nuanced DR considerations</strong>: While data replication enables DR capabilities, full DR requires application-specific planning</li>
<li><strong>Separate DR deployments</strong>: For dedicated DR (not performance), use completely separate Terraform deployments</li>
</ul>
<p><strong>Why We Break the Anti-Pattern Rule</strong>:</p>
<ul>
<li><strong>Performance benefit</strong>: Global teams get better performance with low-latency regional access</li>
<li><strong>Cross-region coordination</strong>: When deploying multi-region, replication setup requires shared resources</li>
<li><strong>Single system</strong>: Multi-region deployments create one global application, not separate deployments</li>
<li><strong>Optional optimization</strong>: Multi-region is a performance optimization, not a technical requirement</li>
</ul>
<h4 id="single-apply-requirement"><strong>Single Apply Requirement</strong><a class="headerlink" href="#single-apply-requirement" title="Permanent link">&para;</a></h4>
<p><strong>CRITICAL</strong>: All CGD Toolkit modules MUST support single-step multi-region deployment.</p>
<div class="highlight"><pre><span></span><code><span class="c1"># This MUST work - single command deploys all regions</span>
terraform<span class="w"> </span>apply
<span class="c1">#  Deploys us-east-1 DDC + us-west-2 DDC + cross-region replication</span>
</code></pre></div>
<p><strong>Why Single Apply Matters</strong>:</p>
<ul>
<li><strong>Global replication setup</strong>: Cross-region configuration happens during initial deployment</li>
<li><strong>Dependency coordination</strong>: Primary region creates resources that secondary regions need</li>
<li><strong>User experience</strong>: Multi-region should be as easy as single-region</li>
<li><strong>Production readiness</strong>: No manual coordination steps between regions</li>
</ul>
<h4 id="terraform-multi-region-fundamentals"><strong>Terraform Multi-Region Fundamentals</strong><a class="headerlink" href="#terraform-multi-region-fundamentals" title="Permanent link">&para;</a></h4>
<h5 id="each-module-instance-exactly-one-region"><strong>Each Module Instance = Exactly One Region</strong><a class="headerlink" href="#each-module-instance-exactly-one-region" title="Permanent link">&para;</a></h5>
<div class="highlight"><pre><span></span><code><span class="c1"># This is the fundamental pattern - each module does ONE region only</span>
<span class="kr">module</span><span class="w"> </span><span class="nv">&quot;ddc_us_east_1&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="na">source</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;../../modules/unreal-cloud-ddc&quot;</span>
<span class="w">  </span><span class="na">region</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;us-east-1&quot;</span><span class="c1">  # This instance ONLY handles us-east-1</span>
<span class="p">}</span>

<span class="kr">module</span><span class="w"> </span><span class="nv">&quot;ddc_us_west_2&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="na">source</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;../../modules/unreal-cloud-ddc&quot;</span>
<span class="w">  </span><span class="na">region</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;us-west-2&quot;</span><span class="c1">  # This instance ONLY handles us-west-2</span>
<span class="p">}</span>
</code></pre></div>
<p><strong>Key Principle</strong>: Users instantiate the module once per region they want.</p>
<p><strong>AWS Provider v6 Revolution</strong>: Enhanced region support eliminates AWS provider aliases.</p>
<h4 id="before-aws-provider-v6-traditional"><strong>Before AWS Provider v6 (Traditional)</strong><a class="headerlink" href="#before-aws-provider-v6-traditional" title="Permanent link">&para;</a></h4>
<p><strong>Problem</strong>: Every region needed explicit AWS provider aliases</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Root module - OLD WAY (still needed for non-AWS providers)</span>
<span class="kr">provider</span><span class="w"> </span><span class="nv">&quot;aws&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="na">alias</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;us_east_1&quot;</span>
<span class="w">  </span><span class="na">region</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;us-east-1&quot;</span>
<span class="p">}</span>

<span class="kr">provider</span><span class="w"> </span><span class="nv">&quot;aws&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="na">alias</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;us_west_2&quot;</span>
<span class="w">  </span><span class="na">region</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;us-west-2&quot;</span>
<span class="p">}</span>

<span class="kr">module</span><span class="w"> </span><span class="nv">&quot;ddc_us_east_1&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="na">source</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;./modules/unreal-cloud-ddc&quot;</span>
<span class="w">  </span><span class="nb">providers</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="na">aws</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="nv">aws.us_east_1</span><span class="c1">     # Explicit AWS alias required</span>
<span class="w">    </span><span class="na">kubernetes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">kubernetes.us_east_1</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>

<span class="kr">module</span><span class="w"> </span><span class="nv">&quot;ddc_us_west_2&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="na">source</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;./modules/unreal-cloud-ddc&quot;</span>
<span class="w">  </span><span class="nb">providers</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="na">aws</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="nv">aws.us_west_2</span><span class="c1">     # Explicit AWS alias required</span>
<span class="w">    </span><span class="na">kubernetes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">kubernetes.us_west_2</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h4 id="with-aws-provider-v6-enhanced-region-support"><strong>With AWS Provider v6 (Enhanced Region Support)</strong><a class="headerlink" href="#with-aws-provider-v6-enhanced-region-support" title="Permanent link">&para;</a></h4>
<p><strong>Magic</strong>: AWS provider automatically inherits region from module configuration</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Root module - NEW WAY</span>
<span class="c1"># NO AWS provider aliases needed!</span>

<span class="kr">module</span><span class="w"> </span><span class="nv">&quot;ddc_us_east_1&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="na">source</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;./modules/unreal-cloud-ddc&quot;</span>
<span class="w">  </span><span class="na">region</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;us-east-1&quot;</span><span class="c1">  # AWS Provider v6 magic - auto-inherits region</span>

<span class="c1">  # Only non-enhanced providers need aliases</span>
<span class="w">  </span><span class="nb">providers</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="na">kubernetes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">kubernetes.us_east_1</span>
<span class="w">    </span><span class="na">helm</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="nv">helm.us_east_1</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>

<span class="kr">module</span><span class="w"> </span><span class="nv">&quot;ddc_us_west_2&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="na">source</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;./modules/unreal-cloud-ddc&quot;</span>
<span class="w">  </span><span class="na">region</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;us-west-2&quot;</span><span class="c1">  # AWS Provider v6 magic - auto-inherits region</span>

<span class="c1">  # Only non-enhanced providers need aliases</span>
<span class="w">  </span><span class="nb">providers</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="na">kubernetes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">kubernetes.us_west_2</span>
<span class="w">    </span><span class="na">helm</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="nv">helm.us_west_2</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>

<span class="c1"># Still need aliases for non-enhanced providers</span>
<span class="kr">provider</span><span class="w"> </span><span class="nv">&quot;kubernetes&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="na">alias</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;us_east_1&quot;</span>
<span class="w">  </span><span class="na">host</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">module.ddc_us_east_1.cluster_endpoint</span>
<span class="p">}</span>

<span class="kr">provider</span><span class="w"> </span><span class="nv">&quot;kubernetes&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="na">alias</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;us_west_2&quot;</span>
<span class="w">  </span><span class="na">host</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">module.ddc_us_west_2.cluster_endpoint</span>
<span class="p">}</span>
</code></pre></div>
<h4 id="how-aws-provider-v6-works"><strong>How AWS Provider v6 Works</strong><a class="headerlink" href="#how-aws-provider-v6-works" title="Permanent link">&para;</a></h4>
<ol>
<li><strong>Module declares region</strong>: <code>region = "us-east-1"</code></li>
<li><strong>AWS provider auto-configures</strong>: Uses that region automatically</li>
<li><strong>No aliases needed</strong>: AWS resources deploy to correct region</li>
<li><strong>Simple scaling</strong>: Add regions by adding module blocks (max 2 recommended)</li>
</ol>
<h4 id="what-still-needs-aliases"><strong>What Still Needs Aliases</strong><a class="headerlink" href="#what-still-needs-aliases" title="Permanent link">&para;</a></h4>
<ul>
<li><strong>Kubernetes provider</strong>: Not enhanced, needs manual aliases</li>
<li><strong>Helm provider</strong>: Not enhanced, needs manual aliases</li>
<li><strong>kubectl provider</strong>: Not enhanced, needs manual aliases</li>
<li><strong>Any other provider</strong>: Only AWS has enhanced region support</li>
</ul>
<h4 id="inside-cgd-toolkit-modules"><strong>Inside CGD Toolkit Modules</strong><a class="headerlink" href="#inside-cgd-toolkit-modules" title="Permanent link">&para;</a></h4>
<p><strong>How modules handle the region variable</strong>:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># modules/unreal-cloud-ddc/variables.tf</span>
<span class="kr">variable</span><span class="w"> </span><span class="nv">&quot;region&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="na">type</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="kt">string</span>
<span class="w">  </span><span class="na">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;AWS region for deployment&quot;</span>
<span class="p">}</span>

<span class="c1"># modules/unreal-cloud-ddc/main.tf</span>
<span class="c1"># AWS resources automatically use the region from variable</span>
<span class="kr">resource</span><span class="w"> </span><span class="nc">&quot;aws_eks_cluster&quot;</span><span class="w"> </span><span class="nv">&quot;main&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="na">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;${local.name_prefix}-cluster-${var.region}&quot;</span>
<span class="c1">  # AWS Provider v6 automatically uses var.region</span>
<span class="p">}</span>

<span class="c1"># Pass region to submodules</span>
<span class="kr">module</span><span class="w"> </span><span class="nv">&quot;infra&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="na">source</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;./modules/infra&quot;</span>
<span class="w">  </span><span class="na">region</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">var.region</span><span class="c1">  # Propagate region down</span>
<span class="w">  </span><span class="nb">providers</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="na">aws</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">aws</span><span class="w"> </span><span class="p">}</span><span class="c1">  # AWS provider inherits region automatically</span>
<span class="p">}</span>
</code></pre></div>
<p><strong>Benefits</strong>:</p>
<ul>
<li><strong>AWS Provider v6</strong>: Simplified region handling, no aliases needed</li>
<li><strong>Other providers</strong>: Still require manual aliases per region</li>
<li><strong>Clean code</strong>: Each module block identical except for region</li>
</ul>
<h4 id="multi-region-implementation-pattern"><strong>Multi-Region Implementation Pattern</strong><a class="headerlink" href="#multi-region-implementation-pattern" title="Permanent link">&para;</a></h4>
<h5 id="explicit-module-blocks-only-recommended-pattern"><strong>Explicit Module Blocks (Only Recommended Pattern)</strong><a class="headerlink" href="#explicit-module-blocks-only-recommended-pattern" title="Permanent link">&para;</a></h5>
<p><strong>Best for</strong>: Multi-region deployments (max 2 regions)</p>
<div class="highlight"><pre><span></span><code><span class="c1"># examples/multi-region-basic/main.tf</span>
<span class="c1"># Clear, explicit, easy to understand</span>

<span class="c1"># Primary Region - Creates shared resources</span>
<span class="kr">module</span><span class="w"> </span><span class="nv">&quot;ddc_primary&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="na">source</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;../../modules/unreal-cloud-ddc&quot;</span>
<span class="w">  </span><span class="na">region</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;us-east-1&quot;</span>

<span class="w">  </span><span class="nb">providers</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="na">kubernetes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">kubernetes.primary</span>
<span class="w">    </span><span class="na">helm</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="nv">helm.primary</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="nb">scylla_config</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nb">current_region</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="na">datacenter_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;us_east&quot;</span>
<span class="w">      </span><span class="na">replication_factor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">3</span>
<span class="w">      </span><span class="na">node_count</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">3</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="na">enable_cross_region_replication</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">true</span>
<span class="w">  </span><span class="p">}</span>

<span class="c1">  # Primary creates bearer token for replication</span>
<span class="w">  </span><span class="na">bearer_token_replica_regions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;us-west-2&quot;</span><span class="p">]</span>
<span class="p">}</span>

<span class="c1"># Secondary Region - Uses shared resources</span>
<span class="kr">module</span><span class="w"> </span><span class="nv">&quot;ddc_secondary&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="na">source</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;../../modules/unreal-cloud-ddc&quot;</span>
<span class="w">  </span><span class="na">region</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;us-west-2&quot;</span>

<span class="w">  </span><span class="nb">providers</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="na">kubernetes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">kubernetes.secondary</span>
<span class="w">    </span><span class="na">helm</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="nv">helm.secondary</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="nb">scylla_config</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nb">current_region</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="na">datacenter_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;us_west&quot;</span>
<span class="w">      </span><span class="na">replication_factor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">2</span>
<span class="w">      </span><span class="na">node_count</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">2</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="na">enable_cross_region_replication</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">true</span>
<span class="w">  </span><span class="p">}</span>

<span class="c1">  # Secondary uses primary&#39;s bearer token</span>
<span class="w">  </span><span class="na">create_bearer_token</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">false</span>
<span class="w">  </span><span class="na">bearer_token_secret_arn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">module.ddc_primary.bearer_token_secret_arn</span>

<span class="w">  </span><span class="na">depends_on</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="nv">module.ddc_primary</span><span class="p">]</span><span class="c1">  # Ensures proper ordering</span>
<span class="p">}</span>
</code></pre></div>
<p><strong>Benefits</strong>:</p>
<ul>
<li> <strong>Clear and explicit</strong> - obvious what's deployed where</li>
<li> <strong>Different configurations</strong> - each region can have unique settings</li>
<li> <strong>Easy debugging</strong> - clear dependency chain</li>
<li> <strong>Single apply</strong> - all regions deployed together</li>
</ul>
<h4 id="dns-and-regional-endpoint-patterns"><strong>DNS and Regional Endpoint Patterns</strong><a class="headerlink" href="#dns-and-regional-endpoint-patterns" title="Permanent link">&para;</a></h4>
<h5 id="private-dns-zones-always-created"><strong>Private DNS Zones (Always Created)</strong><a class="headerlink" href="#private-dns-zones-always-created" title="Permanent link">&para;</a></h5>
<p><strong>All CGD Toolkit modules automatically create private DNS zones for internal service discovery:</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1"># Always create private zone for internal routing</span>
<span class="kr">resource</span><span class="w"> </span><span class="nc">&quot;aws_route53_zone&quot;</span><span class="w"> </span><span class="nv">&quot;private&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="na">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">var.existing_route53_public_hosted_zone_name</span><span class="w"> </span><span class="p">!=</span><span class="w"> </span><span class="kt">null</span><span class="w"> </span><span class="p">?</span>
<span class="w">    </span><span class="s2">&quot;${var.project_prefix}.${var.existing_route53_public_hosted_zone_name}&quot;</span><span class="w"> </span><span class="o">:</span>
<span class="w">    </span><span class="s2">&quot;${var.project_prefix}.internal&quot;</span>

<span class="w">  </span><span class="nb">vpc</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="na">vpc_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">var.existing_vpc_id</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>

<span class="c1"># Internal service discovery records</span>
<span class="kr">resource</span><span class="w"> </span><span class="nc">&quot;aws_route53_record&quot;</span><span class="w"> </span><span class="nv">&quot;service_internal&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="na">zone_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">aws_route53_zone.private.zone_id</span>
<span class="w">  </span><span class="na">name</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;service&quot;</span>
<span class="w">  </span><span class="na">type</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;A&quot;</span>
<span class="w">  </span><span class="na">ttl</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="m">300</span>
<span class="w">  </span><span class="na">records</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="nv">aws_lb.nlb.dns_name</span><span class="p">]</span>
<span class="p">}</span>
</code></pre></div>
<h5 id="regional-endpoint-strategy"><strong>Regional Endpoint Strategy</strong><a class="headerlink" href="#regional-endpoint-strategy" title="Permanent link">&para;</a></h5>
<p><strong>Following AWS service patterns, we default to regional endpoints:</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1"># Regional DNS pattern (our default)</span>
<span class="nb">locals</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="na">regional_dns_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">var.existing_route53_public_hosted_zone_name</span><span class="w"> </span><span class="p">!=</span><span class="w"> </span><span class="kt">null</span><span class="w"> </span><span class="p">?</span>
<span class="w">    </span><span class="s2">&quot;${var.region}.${local.service_name}.${var.existing_route53_public_hosted_zone_name}&quot;</span><span class="w"> </span><span class="o">:</span>
<span class="w">    </span><span class="kt">null</span>

<span class="w">  </span><span class="na">service_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;ddc&quot;  # or &quot;perforce&quot;, &quot;jenkins&quot;</span><span class="p">,</span><span class="w"> </span><span class="err">etc</span><span class="p">.</span>
<span class="p">}</span>

<span class="c1"># Examples of regional endpoints:</span>
<span class="c1"># us-east-1.ddc.company.com</span>
<span class="c1"># us-west-2.ddc.company.com</span>
<span class="c1"># eu-west-1.perforce.company.com</span>
</code></pre></div>
<p><strong>Why Regional Endpoints</strong>:</p>
<ul>
<li><strong>Performance</strong>: Direct routing to nearest region</li>
<li><strong>Isolation</strong>: Regional failures don't affect DNS routing</li>
<li><strong>Explicit control</strong>: Users know exactly which region they're accessing</li>
<li><strong>AWS consistency</strong>: Follows AWS service endpoint patterns</li>
</ul>
<h5 id="global-endpoint-flexibility"><strong>Global Endpoint Flexibility</strong><a class="headerlink" href="#global-endpoint-flexibility" title="Permanent link">&para;</a></h5>
<p><strong>Users can optionally create global endpoints with routing policies:</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1"># Optional: Global endpoint with latency-based routing</span>
<span class="kr">resource</span><span class="w"> </span><span class="nc">&quot;aws_route53_record&quot;</span><span class="w"> </span><span class="nv">&quot;global_latency&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="na">zone_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">var.existing_route53_public_hosted_zone_id</span>
<span class="w">  </span><span class="na">name</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;ddc&quot;</span><span class="c1">  # Global endpoint: ddc.company.com</span>
<span class="w">  </span><span class="na">type</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;A&quot;</span>

<span class="w">  </span><span class="na">set_identifier</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;us-east-1&quot;</span>
<span class="w">  </span><span class="nb">latency_routing_policy</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="na">region</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;us-east-1&quot;</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="nb">alias</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="na">name</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="nv">module.ddc_primary.nlb_dns_name</span>
<span class="w">    </span><span class="na">zone_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">module.ddc_primary.nlb_zone_id</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">&quot;aws_route53_record&quot;</span><span class="w"> </span><span class="nv">&quot;global_latency_secondary&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="na">zone_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">var.existing_route53_public_hosted_zone_id</span>
<span class="w">  </span><span class="na">name</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;ddc&quot;</span><span class="c1">  # Same global endpoint</span>
<span class="w">  </span><span class="na">type</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;A&quot;</span>

<span class="w">  </span><span class="na">set_identifier</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;us-west-2&quot;</span>
<span class="w">  </span><span class="nb">latency_routing_policy</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="na">region</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;us-west-2&quot;</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="nb">alias</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="na">name</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="nv">module.ddc_secondary.nlb_dns_name</span>
<span class="w">    </span><span class="na">zone_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">module.ddc_secondary.nlb_zone_id</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p><strong>Global Routing Options</strong>:</p>
<ul>
<li><strong>Latency-based</strong>: Route to lowest latency region</li>
<li><strong>Geolocation</strong>: Route based on user's geographic location</li>
<li><strong>Failover</strong>: Primary/secondary with health checks</li>
<li><strong>Weighted</strong>: Distribute traffic by percentage</li>
</ul>
<h5 id="dns-output-strategy"><strong>DNS Output Strategy</strong><a class="headerlink" href="#dns-output-strategy" title="Permanent link">&para;</a></h5>
<p><strong>Modules provide both regional and global DNS flexibility:</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1"># Module outputs for DNS flexibility</span>
<span class="kr">output</span><span class="w"> </span><span class="nv">&quot;dns_endpoints&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="na">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;DNS endpoints for service access&quot;</span>
<span class="w">  </span><span class="nb">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="c1">    # Regional endpoints (always available)</span>
<span class="w">    </span><span class="nb">regional</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="na">public_dns</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="nv">local.regional_dns_name</span>
<span class="w">      </span><span class="na">private_dns</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;${local.service_name}.${aws_route53_zone.private.name}&quot;</span>
<span class="w">    </span><span class="p">}</span>

<span class="c1">    # Load balancer details for global routing</span>
<span class="w">    </span><span class="nb">load_balancer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="na">nlb_dns_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">aws_lb.nlb.dns_name</span>
<span class="w">      </span><span class="na">nlb_zone_id</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="nv">aws_lb.nlb.zone_id</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p><strong>This approach provides</strong>:</p>
<ul>
<li><strong>Regional by default</strong>: Each region gets its own endpoint</li>
<li><strong>Global flexibility</strong>: Users can create global endpoints if needed</li>
<li><strong>Internal routing</strong>: Private DNS for service-to-service communication</li>
<li><strong>Load balancer access</strong>: Direct NLB access for advanced routing scenarios</li>
</ul>
<h4 id="networking-and-security-boundaries"><strong>Networking and Security Boundaries</strong><a class="headerlink" href="#networking-and-security-boundaries" title="Permanent link">&para;</a></h4>
<h5 id="clear-demarcation-what-modules-dont-create"><strong>Clear Demarcation: What Modules DON'T Create</strong><a class="headerlink" href="#clear-demarcation-what-modules-dont-create" title="Permanent link">&para;</a></h5>
<p><strong>CGD Toolkit modules have clear boundaries - we don't create foundational infrastructure:</strong></p>
<p><strong> Modules DO NOT Create:</strong></p>
<ul>
<li><strong>VPCs and Subnets</strong>: Users provide existing VPC and subnet IDs</li>
<li><strong>SSL/TLS Certificates</strong>: Users provide existing ACM certificate ARNs</li>
<li><strong>Public Hosted Zones</strong>: Users provide existing Route53 hosted zone names</li>
<li><strong>VPC-to-VPC Connectivity</strong>: Peering connections, Transit Gateway, etc.</li>
<li><strong>Network ACLs</strong>: Users manage network-level security</li>
<li><strong>Internet/NAT Gateways</strong>: Users provide connectivity infrastructure</li>
</ul>
<p><strong> Modules DO Create:</strong></p>
<ul>
<li><strong>Private DNS zones</strong>: For internal service discovery</li>
<li><strong>Security groups</strong>: For service-specific access control</li>
<li><strong>Load balancers</strong>: NLB/ALB for service access</li>
<li><strong>DNS records</strong>: In both private and public zones (when provided)</li>
</ul>
<h5 id="ssltls-certificate-integration"><strong>SSL/TLS Certificate Integration</strong><a class="headerlink" href="#ssltls-certificate-integration" title="Permanent link">&para;</a></h5>
<p><strong>Modules integrate with existing certificates, don't create them:</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1"># User creates certificate outside module</span>
<span class="kr">resource</span><span class="w"> </span><span class="nc">&quot;aws_acm_certificate&quot;</span><span class="w"> </span><span class="nv">&quot;service_cert&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="na">domain_name</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;*.ddc.company.com&quot;</span>
<span class="w">  </span><span class="na">validation_method</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;DNS&quot;</span>

<span class="w">  </span><span class="na">subject_alternative_names</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="s2">&quot;ddc.company.com&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s2">&quot;*.us-east-1.ddc.company.com&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s2">&quot;*.us-west-2.ddc.company.com&quot;</span>
<span class="w">  </span><span class="p">]</span>

<span class="w">  </span><span class="nb">lifecycle</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="na">create_before_destroy</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">true</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>

<span class="c1"># Module accepts certificate reference</span>
<span class="kr">module</span><span class="w"> </span><span class="nv">&quot;ddc&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="na">source</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;../../modules/unreal-cloud-ddc&quot;</span>

<span class="c1">  # Pass existing certificate ARN</span>
<span class="w">  </span><span class="na">existing_certificate_arn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">aws_acm_certificate.service_cert.arn</span>

<span class="c1">  # Module configures HTTPS listeners</span>
<span class="c1">  # Module handles certificate attachment to load balancers</span>
<span class="p">}</span>
</code></pre></div>
<p><strong>Why This Approach</strong>:</p>
<ul>
<li><strong>Certificate lifecycle</strong>: Users control certificate renewal and management</li>
<li><strong>Domain ownership</strong>: Users own and validate their domains</li>
<li><strong>Security control</strong>: Certificate management stays with domain owners</li>
<li><strong>Flexibility</strong>: Users can use existing certificate management processes</li>
</ul>
<h5 id="vpc-and-subnet-integration"><strong>VPC and Subnet Integration</strong><a class="headerlink" href="#vpc-and-subnet-integration" title="Permanent link">&para;</a></h5>
<p><strong>Modules work within existing network infrastructure:</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1"># User provides existing network infrastructure</span>
<span class="kr">module</span><span class="w"> </span><span class="nv">&quot;ddc&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="na">source</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;../../modules/unreal-cloud-ddc&quot;</span>

<span class="c1">  # Existing VPC (user-created)</span>
<span class="w">  </span><span class="na">existing_vpc_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;vpc-12345678&quot;</span>

<span class="c1">  # Existing subnets (user-created)</span>
<span class="w">  </span><span class="na">existing_load_balancer_subnets</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="s2">&quot;subnet-12345678&quot;</span><span class="p">,</span><span class="c1">  # Public subnet for internet-facing LB</span>
<span class="w">    </span><span class="s2">&quot;subnet-87654321&quot;</span><span class="c1">   # Public subnet for HA</span>
<span class="w">  </span><span class="p">]</span>

<span class="w">  </span><span class="na">existing_service_subnets</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="s2">&quot;subnet-abcdef12&quot;</span><span class="p">,</span><span class="c1">  # Private subnet for EKS/services</span>
<span class="w">    </span><span class="s2">&quot;subnet-21fedcba&quot;</span><span class="c1">   # Private subnet for HA</span>
<span class="w">  </span><span class="p">]</span>

<span class="c1">  # Module creates resources within provided network</span>
<span class="p">}</span>
</code></pre></div>
<p><strong>Network Architecture Assumptions</strong>:</p>
<ul>
<li><strong>Public subnets</strong>: For internet-facing load balancers</li>
<li><strong>Private subnets</strong>: For EKS clusters, databases, internal services</li>
<li><strong>NAT Gateway</strong>: Users provide internet access for private subnets</li>
<li><strong>Route tables</strong>: Users configure routing for subnets</li>
<li><strong>VPC endpoints</strong>: Users create for AWS service access (optional)</li>
</ul>
<h5 id="security-group-strategy_1"><strong>Security Group Strategy</strong><a class="headerlink" href="#security-group-strategy_1" title="Permanent link">&para;</a></h5>
<p><strong>Modules create service-specific security groups, users control external access:</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1"># Users create external access security groups</span>
<span class="kr">resource</span><span class="w"> </span><span class="nc">&quot;aws_security_group&quot;</span><span class="w"> </span><span class="nv">&quot;office_access&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="na">name_prefix</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;office-access-&quot;</span>
<span class="w">  </span><span class="na">vpc_id</span><span class="w">      </span><span class="o">=</span><span class="w"> </span><span class="nv">var.vpc_id</span>
<span class="p">}</span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">&quot;aws_vpc_security_group_ingress_rule&quot;</span><span class="w"> </span><span class="nv">&quot;office_https&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="na">security_group_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">aws_security_group.office_access.id</span>
<span class="w">  </span><span class="na">description</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;HTTPS from office network&quot;</span>
<span class="w">  </span><span class="na">ip_protocol</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;tcp&quot;</span>
<span class="w">  </span><span class="na">from_port</span><span class="w">         </span><span class="o">=</span><span class="w"> </span><span class="m">443</span>
<span class="w">  </span><span class="na">to_port</span><span class="w">           </span><span class="o">=</span><span class="w"> </span><span class="m">443</span>
<span class="w">  </span><span class="na">cidr_ipv4</span><span class="w">         </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;203.0.113.0/24&quot;</span><span class="c1">  # Office CIDR</span>
<span class="p">}</span>

<span class="c1"># Module accepts user-controlled security groups</span>
<span class="kr">module</span><span class="w"> </span><span class="nv">&quot;ddc&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="na">source</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;../../modules/unreal-cloud-ddc&quot;</span>

<span class="c1">  # User-controlled external access</span>
<span class="w">  </span><span class="na">existing_security_groups</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="nv">aws_security_group.office_access.id</span>
<span class="w">  </span><span class="p">]</span>

<span class="c1">  # Module creates internal security groups for service communication</span>
<span class="p">}</span>
</code></pre></div>
<p><strong>Security Responsibilities</strong>:</p>
<ul>
<li><strong>Users control</strong>: External access rules, CIDR blocks, source security groups</li>
<li><strong>Modules create</strong>: Internal service communication rules, AWS API access</li>
<li><strong>Principle</strong>: Users define "who can access", modules define "how services communicate"</li>
</ul>
<h5 id="public-hosted-zone-integration"><strong>Public Hosted Zone Integration</strong><a class="headerlink" href="#public-hosted-zone-integration" title="Permanent link">&para;</a></h5>
<p><strong>Modules use existing public zones, don't create them:</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1"># User owns and manages public hosted zone</span>
<span class="kr">data</span><span class="w"> </span><span class="nc">&quot;aws_route53_zone&quot;</span><span class="w"> </span><span class="nv">&quot;company&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="na">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;company.com&quot;</span>
<span class="p">}</span>

<span class="c1"># Module uses existing zone for public DNS records</span>
<span class="kr">module</span><span class="w"> </span><span class="nv">&quot;ddc&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="na">source</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;../../modules/unreal-cloud-ddc&quot;</span>

<span class="c1">  # Reference existing public zone</span>
<span class="w">  </span><span class="na">existing_route53_public_hosted_zone_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;company.com&quot;</span>

<span class="c1">  # Module creates records like: us-east-1.ddc.company.com</span>
<span class="c1">  # Module does NOT create the company.com zone</span>
<span class="p">}</span>
</code></pre></div>
<p><strong>DNS Responsibilities</strong>:</p>
<ul>
<li><strong>Users own</strong>: Domain registration, public hosted zone management</li>
<li><strong>Modules create</strong>: Service-specific DNS records in provided zones</li>
<li><strong>Private zones</strong>: Modules always create for internal service discovery</li>
</ul>
<h5 id="multi-region-network-considerations"><strong>Multi-Region Network Considerations</strong><a class="headerlink" href="#multi-region-network-considerations" title="Permanent link">&para;</a></h5>
<p><strong>For multi-region deployments, users handle cross-region connectivity:</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1"># Users create VPC peering or Transit Gateway (outside modules)</span>
<span class="kr">resource</span><span class="w"> </span><span class="nc">&quot;aws_vpc_peering_connection&quot;</span><span class="w"> </span><span class="nv">&quot;cross_region&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="na">vpc_id</span><span class="w">      </span><span class="o">=</span><span class="w"> </span><span class="nv">var.primary_vpc_id</span><span class="c1">    # us-east-1</span>
<span class="w">  </span><span class="na">peer_vpc_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">var.secondary_vpc_id</span><span class="c1">  # us-west-2</span>
<span class="w">  </span><span class="na">peer_region</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;us-west-2&quot;</span>

<span class="c1">  # Users manage cross-region network connectivity</span>
<span class="p">}</span>

<span class="c1"># Modules work within each region&#39;s VPC independently</span>
<span class="kr">module</span><span class="w"> </span><span class="nv">&quot;ddc_primary&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="na">existing_vpc_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">var.primary_vpc_id</span><span class="c1">    # us-east-1 VPC</span>
<span class="p">}</span>

<span class="kr">module</span><span class="w"> </span><span class="nv">&quot;ddc_secondary&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="na">existing_vpc_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">var.secondary_vpc_id</span><span class="c1">  # us-west-2 VPC</span>
<span class="p">}</span>
</code></pre></div>
<p><strong>Cross-Region Network Responsibilities</strong>:</p>
<ul>
<li><strong>Users handle</strong>: VPC peering, Transit Gateway, cross-region routing</li>
<li><strong>Modules handle</strong>: Application-level cross-region communication (database replication, etc.)</li>
<li><strong>Clear separation</strong>: Network connectivity vs. application connectivity</li>
</ul>
<h5 id="example-integration-pattern"><strong>Example Integration Pattern</strong><a class="headerlink" href="#example-integration-pattern" title="Permanent link">&para;</a></h5>
<p><strong>Complete example showing user vs. module responsibilities:</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1"># USER RESPONSIBILITIES (outside module)</span>
<span class="c1"># 1. VPC and networking</span>
<span class="kr">resource</span><span class="w"> </span><span class="nc">&quot;aws_vpc&quot;</span><span class="w"> </span><span class="nv">&quot;main&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="na">cidr_block</span><span class="w">           </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;10.0.0.0/16&quot;</span>
<span class="w">  </span><span class="na">enable_dns_hostnames</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">true</span>
<span class="w">  </span><span class="na">enable_dns_support</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="no">true</span>
<span class="p">}</span>

<span class="c1"># 2. SSL certificate</span>
<span class="kr">resource</span><span class="w"> </span><span class="nc">&quot;aws_acm_certificate&quot;</span><span class="w"> </span><span class="nv">&quot;ddc&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="na">domain_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;*.ddc.company.com&quot;</span>
<span class="p">}</span>

<span class="c1"># 3. External access security group</span>
<span class="kr">resource</span><span class="w"> </span><span class="nc">&quot;aws_security_group&quot;</span><span class="w"> </span><span class="nv">&quot;external_access&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="na">vpc_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">aws_vpc.main.id</span>
<span class="p">}</span>

<span class="c1"># MODULE RESPONSIBILITIES (inside module)</span>
<span class="kr">module</span><span class="w"> </span><span class="nv">&quot;ddc&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="na">source</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;../../modules/unreal-cloud-ddc&quot;</span>

<span class="c1">  # Use existing infrastructure</span>
<span class="w">  </span><span class="na">existing_vpc_id</span><span class="w">                          </span><span class="o">=</span><span class="w"> </span><span class="nv">aws_vpc.main.id</span>
<span class="w">  </span><span class="na">existing_certificate_arn</span><span class="w">                 </span><span class="o">=</span><span class="w"> </span><span class="nv">aws_acm_certificate.ddc.arn</span>
<span class="w">  </span><span class="na">existing_security_groups</span><span class="w">                 </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="nv">aws_security_group.external_access.id</span><span class="p">]</span>
<span class="w">  </span><span class="na">existing_route53_public_hosted_zone_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;company.com&quot;</span>

<span class="c1">  # Module creates: EKS, NLB, private DNS, internal security groups</span>
<span class="p">}</span>
</code></pre></div>
<p><strong>This pattern ensures</strong>:</p>
<ul>
<li><strong>Clear ownership</strong>: Users own foundational infrastructure</li>
<li><strong>Module focus</strong>: Modules focus on service-specific resources</li>
<li><strong>Flexibility</strong>: Users can integrate with existing infrastructure</li>
<li><strong>Security</strong>: Users control access boundaries, modules handle service communication</li>
</ul>
<h4 id="multi-region-design-requirements-for-all-modules"><strong>Multi-Region Design Requirements for All Modules</strong><a class="headerlink" href="#multi-region-design-requirements-for-all-modules" title="Permanent link">&para;</a></h4>
<h5 id="must-support-single-apply-for-inherently-multi-region-apps"><strong>MUST Support Single Apply (For Inherently Multi-Region Apps)</strong><a class="headerlink" href="#must-support-single-apply-for-inherently-multi-region-apps" title="Permanent link">&para;</a></h5>
<p><strong>CGD Toolkit modules that are inherently multi-region MUST enable single-step deployment:</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1"># This MUST work for Perforce, DDC, and similar cross-region apps</span>
<span class="nb">cd</span><span class="w"> </span>examples/multi-region-basic/
terraform<span class="w"> </span>init
terraform<span class="w"> </span>apply<span class="w">  </span><span class="c1"># Deploys PRIMARY + SECONDARY regions (MAX 2)</span>
</code></pre></div>
<p><strong> IMPORTANT</strong>: This is ONLY for applications that require cross-region replication by design.</p>
<h5 id="cross-region-coordination-patterns"><strong>Cross-Region Coordination Patterns</strong><a class="headerlink" href="#cross-region-coordination-patterns" title="Permanent link">&para;</a></h5>
<p><strong>Primary/Secondary Pattern</strong> (Recommended):</p>
<ul>
<li><strong>Primary region</strong>: Creates shared resources (bearer tokens, seed nodes)</li>
<li><strong>Secondary regions</strong>: Reference primary's outputs</li>
<li><strong>Dependencies</strong>: <code>depends_on = [module.primary]</code> ensures proper ordering</li>
</ul>
<h5 id="module-implementation-standards"><strong>Module Implementation Standards</strong><a class="headerlink" href="#module-implementation-standards" title="Permanent link">&para;</a></h5>
<p><strong>For inherently multi-region modules (Perforce, DDC):</strong></p>
<ul>
<li><strong>Single apply</strong>: PRIMARY + SECONDARY regions (MAX 2) deploy with one <code>terraform apply</code></li>
<li><strong>Cross-region variables</strong>: Support peer region configuration</li>
<li><strong>Dependency management</strong>: Use <code>depends_on</code> for proper ordering</li>
<li><strong>Regional DNS</strong>: Support regional endpoints (us-east-1.service.domain.com)</li>
<li><strong>Shared resources</strong>: Primary creates, secondary references</li>
<li><strong>Provider compatibility</strong>: Work with AWS Provider v6 enhanced regions</li>
<li><strong>Example provided</strong>: Working multi-region example in <code>examples/</code></li>
<li><strong>Documentation</strong>: Clear guidance on when to use separate deployments instead</li>
</ul>
<h5 id="critical-when-not-to-use-multi-region-single-state"><strong> CRITICAL: When NOT to Use Multi-Region Single State</strong><a class="headerlink" href="#critical-when-not-to-use-multi-region-single-state" title="Permanent link">&para;</a></h5>
<p><strong> ABSOLUTE ANTI-PATTERNS:</strong></p>
<ul>
<li><strong>General applications</strong>: Most apps should be single-region</li>
<li><strong>Dedicated disaster recovery</strong>: Use completely separate Terraform deployments for DR-only scenarios</li>
<li><strong>Environment separation</strong>: dev/staging/prod should be separate states</li>
<li><strong>"Just in case" deployments</strong>: Don't deploy to regions you don't actively use</li>
<li><strong>More than 2 regions in one state</strong>: Creates unmanageable complexity</li>
</ul>
<p><strong> ONLY Valid Use Cases:</strong></p>
<ul>
<li><strong>Applications that benefit from multi-region</strong>: Perforce, DDC where cross-region replication improves performance</li>
<li><strong>Active global usage</strong>: All regions actively used by distributed teams for better performance</li>
<li><strong>Performance optimization</strong>: Low-latency access across continents for same application data</li>
<li><strong>Maximum 1-2 regions</strong>: Keep state files manageable</li>
<li><strong>Single-region alternative</strong>: Remember these applications work perfectly fine single-region too</li>
</ul>
<p><strong> The Rule</strong>: If your application doesn't REQUIRE cross-region data replication for <strong>performance/functionality</strong>, use separate Terraform deployments per region.</p>
<p><strong>DR Considerations</strong>:</p>
<ul>
<li><strong>Side benefit</strong>: Performance-driven replication means either region could serve as DR</li>
<li><strong>Application-specific</strong>: Each application (DDC, Perforce) has different DR capabilities and requirements</li>
<li><strong>Not primary purpose</strong>: DR should not be the main reason for choosing multi-region single-state pattern</li>
<li><strong>Dedicated DR</strong>: For DR-only scenarios, use separate Terraform deployments in different regions</li>
</ul>
<h4 id="summary-multi-region-best-practices"><strong>Summary: Multi-Region Best Practices</strong><a class="headerlink" href="#summary-multi-region-best-practices" title="Permanent link">&para;</a></h4>
<p><strong>Recommended Approach</strong>: Use explicit module blocks - MAX 2 regions</p>
<div class="highlight"><pre><span></span><code><span class="kr">module</span><span class="w"> </span><span class="nv">&quot;service_primary&quot;</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="na">region</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;us-east-1&quot;</span><span class="w"> </span><span class="p">}</span>
<span class="kr">module</span><span class="w"> </span><span class="nv">&quot;service_secondary&quot;</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="na">region</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;us-west-2&quot;</span><span class="w"> </span><span class="p">}</span>
<span class="c1">#  DON&#39;T ADD MORE - Use separate Terraform deployments instead</span>
</code></pre></div>
<p><strong> For Most Applications</strong>: Deploy each region as separate Terraform root modules</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Recommended pattern for most applications (follows Pattern B above)</span>
<span class="nb">cd</span><span class="w"> </span>deployments/us-east-1/
terraform<span class="w"> </span>apply<span class="w">  </span><span class="c1"># Separate state file</span>

<span class="nb">cd</span><span class="w"> </span>../us-west-2/
terraform<span class="w"> </span>apply<span class="w">  </span><span class="c1"># Separate state file</span>
</code></pre></div>
<p><strong>This follows Pattern B (Application-Specific with Regional Folders) and provides:</strong></p>
<ul>
<li><strong>Independent state files</strong>: Each region manageable separately</li>
<li><strong>Team parallelism</strong>: Multiple teams can work simultaneously</li>
<li><strong>Reduced blast radius</strong>: Regional isolation prevents cascading failures</li>
<li><strong>Application focus</strong>: Repository ownership aligns with team responsibilities</li>
<li><strong>Standard tooling</strong>: Works with existing Terraform workflows</li>
</ul>
<p><strong>Key Principles</strong>:</p>
<ul>
<li> <strong>Each module instance = exactly one region</strong></li>
<li> <strong>Single apply ONLY for inherently multi-region apps</strong> (Perforce, DDC)</li>
<li> <strong>Multi-region is for performance, not DR</strong></li>
<li> <strong>Maximum 1-2 regions per state file</strong></li>
<li> <strong>Most applications should use separate Terraform deployments per region</strong></li>
<li> <strong>Use explicit module blocks, not dynamic generation</strong></li>
<li> <strong>AWS Provider v6 eliminates AWS provider aliases</strong></li>
</ul>
<p><strong>Benefits</strong>:</p>
<ul>
<li><strong>Performance</strong>: Low latency for global teams</li>
<li><strong>Single deployment</strong>: All regions with one <code>terraform apply</code></li>
<li><strong>Global replication</strong>: Cross-region data sharing</li>
<li><strong>AWS Provider v6</strong>: Simplified region handling</li>
</ul>
<p><strong> CRITICAL Considerations</strong>:</p>
<ul>
<li><strong> State file explosion</strong>: More regions = exponentially larger, slower state</li>
<li><strong> Massive blast radius</strong>: One mistake destroys all regions</li>
<li><strong> Performance degradation</strong>: <code>terraform plan</code> becomes painfully slow</li>
<li><strong> Team paralysis</strong>: Multiple teams can't work independently</li>
<li><strong> Debugging nightmare</strong>: Finding issues across regions becomes impossible</li>
<li><strong>Network costs</strong>: Cross-region data transfer charges</li>
<li><strong>Complexity</strong>: Exponentially more moving parts to troubleshoot</li>
</ul>
<p><strong> Solution</strong>: Use separate Terraform deployments for most applications</p>
<h3 id="version-conflicts-and-resolution"><strong>Version Conflicts and Resolution</strong><a class="headerlink" href="#version-conflicts-and-resolution" title="Permanent link">&para;</a></h3>
<p><strong>Common Problem</strong>: Different modules require different provider versions</p>
<h4 id="conflict-scenario"><strong>Conflict Scenario</strong><a class="headerlink" href="#conflict-scenario" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="c1"># Module A requires</span>
<span class="nb">kubernetes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="na">version</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;&gt;= 2.30.0&quot;</span><span class="w"> </span><span class="p">}</span>

<span class="c1"># Module B requires</span>
<span class="nb">kubernetes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="na">version</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;&gt;= 2.33.0, &lt; 2.35.0&quot;</span><span class="w"> </span><span class="p">}</span>

<span class="c1"># Root module must satisfy BOTH</span>
<span class="nb">kubernetes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="na">version</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;&gt;= 2.33.0, &lt; 2.35.0&quot;</span><span class="w"> </span><span class="p">}</span><span class="c1">  # Intersection</span>
</code></pre></div>
<h4 id="resolution-strategy"><strong>Resolution Strategy</strong><a class="headerlink" href="#resolution-strategy" title="Permanent link">&para;</a></h4>
<ol>
<li><strong>Use intersection of all constraints</strong>: Find version range that satisfies all modules</li>
<li><strong>Update modules</strong>: Align version requirements across CGD Toolkit</li>
<li><strong>Test compatibility</strong>: Ensure chosen version works with all modules</li>
<li><strong>Document decisions</strong>: Explain version choices in examples</li>
</ol>
<h4 id="multi-region-version-management"><strong>Multi-Region Version Management</strong><a class="headerlink" href="#multi-region-version-management" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="c1"># Root module must declare ALL provider versions for ALL regions</span>
<span class="nb">terraform</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nb">required_providers</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nb">aws</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="na">version</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;&gt;= 6.0.0&quot;</span><span class="w"> </span><span class="p">}</span><span class="c1">  # Enhanced region support</span>
<span class="w">    </span><span class="nb">kubernetes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="na">version</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;&gt;= 2.33.0&quot;</span><span class="w"> </span><span class="p">}</span><span class="c1">  # All regions use same version</span>
<span class="w">    </span><span class="nb">helm</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="na">version</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;&gt;= 2.16.0, &lt; 3.0.0&quot;</span><span class="w"> </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>

<span class="c1"># Each region gets same provider versions</span>
<span class="kr">provider</span><span class="w"> </span><span class="nv">&quot;kubernetes&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="na">alias</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;us_east_1&quot;</span>
<span class="c1">  # Same version as declared above</span>
<span class="p">}</span>

<span class="kr">provider</span><span class="w"> </span><span class="nv">&quot;kubernetes&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="na">alias</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;us_west_2&quot;</span>
<span class="c1">  # Same version as declared above</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="provider-configuration-timing"><strong>Provider Configuration Timing</strong><a class="headerlink" href="#provider-configuration-timing" title="Permanent link">&para;</a></h3>
<p><strong>Critical</strong>: Understanding WHEN provider configurations are evaluated</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Terraform command lifecycle:</span>
<span class="c1"># 1. terraform init - Downloads providers, NO configuration evaluation</span>
<span class="c1"># 2. terraform plan - Provider configurations evaluated HERE</span>
<span class="c1"># 3. terraform apply - Configurations re-evaluated if dependencies changed</span>
</code></pre></div>
<p><strong>Implications</strong>:</p>
<ul>
<li><strong>First run</strong>: Infrastructure doesn't exist, providers get null values</li>
<li><strong>Second run</strong>: Infrastructure exists, providers get real values</li>
<li><strong>Dependencies</strong>: Provider configs must handle missing dependencies gracefully</li>
</ul>
<h2 id="aws-provider-best-practices">AWS Provider Best Practices<a class="headerlink" href="#aws-provider-best-practices" title="Permanent link">&para;</a></h2>
<h3 id="security-group-rules"><strong>Security Group Rules</strong><a class="headerlink" href="#security-group-rules" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1">#  Use dedicated rule resources (AWS Provider v6 requirement)</span>
<span class="kr">resource</span><span class="w"> </span><span class="nc">&quot;aws_vpc_security_group_ingress_rule&quot;</span><span class="w"> </span><span class="nv">&quot;example&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="na">security_group_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">aws_security_group.example.id</span>
<span class="w">  </span><span class="na">description</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;HTTP access from office network&quot;</span>
<span class="w">  </span><span class="na">ip_protocol</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;tcp&quot;</span>
<span class="w">  </span><span class="na">from_port</span><span class="w">         </span><span class="o">=</span><span class="w"> </span><span class="m">80</span>
<span class="w">  </span><span class="na">to_port</span><span class="w">           </span><span class="o">=</span><span class="w"> </span><span class="m">80</span>
<span class="w">  </span><span class="na">cidr_ipv4</span><span class="w">         </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;203.0.113.0/24&quot;</span>
<span class="p">}</span>

<span class="c1">#  Don&#39;t use inline rules or aws_security_group_rule</span>
<span class="kr">resource</span><span class="w"> </span><span class="nc">&quot;aws_security_group&quot;</span><span class="w"> </span><span class="nv">&quot;bad&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nb">ingress</span><span class="w"> </span><span class="p">{</span><span class="cm"> /* ... */</span><span class="w"> </span><span class="p">}</span><span class="c1">  # Deprecated pattern</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="iam-policies"><strong>IAM Policies</strong><a class="headerlink" href="#iam-policies" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1">#  Use policy documents</span>
<span class="kr">data</span><span class="w"> </span><span class="nc">&quot;aws_iam_policy_document&quot;</span><span class="w"> </span><span class="nv">&quot;example&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nb">statement</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="na">effect</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;Allow&quot;</span>
<span class="w">    </span><span class="na">actions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;s3:GetObject&quot;, &quot;s3:PutObject&quot;</span><span class="p">]</span>
<span class="w">    </span><span class="na">resources</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;${aws_s3_bucket.example.arn}/*&quot;</span><span class="p">]</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">&quot;aws_iam_policy&quot;</span><span class="w"> </span><span class="nv">&quot;example&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="na">name</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;example-policy&quot;</span>
<span class="w">  </span><span class="na">policy</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">data.aws_iam_policy_document.example.json</span>
<span class="p">}</span>

<span class="c1">#  Avoid jsonencode unless absolutely necessary</span>
<span class="kr">resource</span><span class="w"> </span><span class="nc">&quot;aws_iam_policy&quot;</span><span class="w"> </span><span class="nv">&quot;bad&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="na">policy</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">jsonencode</span><span class="p">({</span><span class="cm"> /* ... */</span><span class="w"> </span><span class="p">})</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="iam-role-attachments"><strong>IAM Role Attachments</strong><a class="headerlink" href="#iam-role-attachments" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1">#  Use attachment resources</span>
<span class="kr">resource</span><span class="w"> </span><span class="nc">&quot;aws_iam_role&quot;</span><span class="w"> </span><span class="nv">&quot;example&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="na">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;example-role&quot;</span>
<span class="w">  </span><span class="na">assume_role_policy</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">data.aws_iam_policy_document.assume_role.json</span>
<span class="p">}</span>

<span class="kr">resource</span><span class="w"> </span><span class="nc">&quot;aws_iam_role_policy_attachment&quot;</span><span class="w"> </span><span class="nv">&quot;example&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="na">role</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="nv">aws_iam_role.example.name</span>
<span class="w">  </span><span class="na">policy_arn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;arn:aws:iam::aws:policy/ReadOnlyAccess&quot;</span>
<span class="p">}</span>

<span class="c1">#  Don&#39;t use deprecated arguments</span>
<span class="kr">resource</span><span class="w"> </span><span class="nc">&quot;aws_iam_role&quot;</span><span class="w"> </span><span class="nv">&quot;bad&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="na">managed_policy_arns</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;...&quot;</span><span class="p">]</span><span class="c1">  # Deprecated</span>
<span class="w">  </span><span class="nb">inline_policy</span><span class="w"> </span><span class="p">{</span><span class="cm"> /* ... */</span><span class="w"> </span><span class="p">}</span><span class="c1">    # Deprecated</span>
<span class="p">}</span>
</code></pre></div>
<h2 id="output-strategy">Output Strategy<a class="headerlink" href="#output-strategy" title="Permanent link">&para;</a></h2>
<h3 id="what-to-include"><strong>What to Include</strong><a class="headerlink" href="#what-to-include" title="Permanent link">&para;</a></h3>
<p><strong>Philosophy</strong>: Expose what users commonly need, expand based on requests.</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Connection information</span>
<span class="kr">output</span><span class="w"> </span><span class="nv">&quot;service_endpoints&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="na">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;Service connection endpoints&quot;</span>
<span class="w">  </span><span class="nb">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="na">nlb_dns</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="nv">aws_lb.nlb.dns_name</span>
<span class="w">    </span><span class="na">https_url</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">local.public_dns_name</span><span class="w"> </span><span class="p">!=</span><span class="w"> </span><span class="kt">null</span><span class="w"> </span><span class="p">?</span><span class="w"> </span><span class="s2">&quot;https://${local.public_dns_name}&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">null</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>

<span class="c1"># Integration points</span>
<span class="kr">output</span><span class="w"> </span><span class="nv">&quot;cluster_info&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="na">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;EKS cluster information for kubectl&quot;</span>
<span class="w">  </span><span class="nb">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="na">cluster_name</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="nv">aws_eks_cluster.main.name</span>
<span class="w">    </span><span class="na">cluster_endpoint</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">aws_eks_cluster.main.endpoint</span>
<span class="w">    </span><span class="na">cluster_ca_data</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="nv">aws_eks_cluster.main.certificate_authority[0].data</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>

<span class="c1"># Automation helpers</span>
<span class="kr">output</span><span class="w"> </span><span class="nv">&quot;security_group_ids&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="na">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;Security group IDs for additional rules&quot;</span>
<span class="w">  </span><span class="nb">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="na">nlb</span><span class="w">      </span><span class="o">=</span><span class="w"> </span><span class="nv">aws_security_group.nlb.id</span>
<span class="w">    </span><span class="na">internal</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">aws_security_group.internal.id</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p><strong>Include</strong>: Connection info, integration points, automation helpers
<strong>Exclude</strong>: Internal implementation details, rarely used attributes
<strong>Request Pattern</strong>: Users can request additional outputs via PR</p>
<h2 id="breaking-changes-prevention">Breaking Changes Prevention<a class="headerlink" href="#breaking-changes-prevention" title="Permanent link">&para;</a></h2>
<h3 id="critical-rules"><strong>Critical Rules</strong><a class="headerlink" href="#critical-rules" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>NEVER change logical names</strong> without <code>moved</code> blocks</li>
<li><strong>NEVER change variable names</strong> in minor/patch versions</li>
<li><strong>ALWAYS use major version bumps</strong> for breaking changes</li>
<li><strong>ALWAYS test migration paths</strong> with real state files</li>
</ul>
<h3 id="safe-patterns"><strong>Safe Patterns</strong><a class="headerlink" href="#safe-patterns" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1">#  SAFE - Adding resources, optional variables with defaults, new outputs</span>
<span class="kr">resource</span><span class="w"> </span><span class="nc">&quot;aws_s3_bucket&quot;</span><span class="w"> </span><span class="nv">&quot;new_feature&quot;</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span>

<span class="kr">variable</span><span class="w"> </span><span class="nv">&quot;new_option&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="na">type</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="kt">bool</span>
<span class="w">  </span><span class="na">default</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">false</span><span class="c1">  # Required default</span>
<span class="p">}</span>

<span class="kr">output</span><span class="w"> </span><span class="nv">&quot;new_info&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="na">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">aws_s3_bucket.new_feature.id</span>
<span class="p">}</span>
</code></pre></div>
<h2 id="implementation-checklist">Implementation Checklist<a class="headerlink" href="#implementation-checklist" title="Permanent link">&para;</a></h2>
<h3 id="for-new-modules_1"><strong>For New Modules</strong><a class="headerlink" href="#for-new-modules_1" title="Permanent link">&para;</a></h3>
<ul>
<li>[ ] Use 3-tier architecture variables</li>
<li>[ ] Implement standardized logical names</li>
<li>[ ] Use random IDs for predictable naming</li>
<li>[ ] Create private DNS zones automatically</li>
<li>[ ] Implement security group strategy (no 0.0.0.0/0 ingress)</li>
<li>[ ] Add comprehensive examples with versions.tf</li>
<li>[ ] Create tests with setup/ directory</li>
<li>[ ] Document architecture and usage patterns</li>
</ul>
<h3 id="for-existing-modules_1"><strong>For Existing Modules</strong><a class="headerlink" href="#for-existing-modules_1" title="Permanent link">&para;</a></h3>
<ul>
<li>[ ] Plan breaking changes for major versions only</li>
<li>[ ] Add <code>moved</code> blocks for renamed resources</li>
<li>[ ] Update variable naming to match standards</li>
<li>[ ] Test upgrade paths with real state files</li>
<li>[ ] Create migration documentation</li>
</ul>
<hr />
<h2 id="building-great-modules-together">Building Great Modules Together<a class="headerlink" href="#building-great-modules-together" title="Permanent link">&para;</a></h2>
<p>These standards represent our collective wisdom from building production game development infrastructure. By following these patterns, you're contributing to a toolkit that:</p>
<ul>
<li><strong>Empowers game developers</strong> to focus on creating amazing games instead of wrestling with infrastructure</li>
<li><strong>Reduces cognitive load</strong> through consistent, predictable interfaces</li>
<li><strong>Scales with teams</strong> from indie studios to AAA publishers</li>
<li><strong>Evolves safely</strong> with backward compatibility and clear migration paths</li>
</ul>
<p>Every module you build following these standards makes the entire ecosystem stronger. Thank you for being part of this journey!</p>
<p><strong>Questions or Ideas?</strong> Open an issue or discussion - we love hearing from the community and these standards improve through your feedback.</p>







  
    
  
  


  <aside class="md-source-file">
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="Last update">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"/></svg>
    </span>
    2025-12-17
  </span>

    
    
    
    
  </aside>





                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="index.html" class="md-footer__link md-footer__link--prev" aria-label="Previous: Overview">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Overview
              </div>
            </div>
          </a>
        
        
          
          <a href="perforce/index.html" class="md-footer__link md-footer__link--next" aria-label="Next: Perforce on AWS Terraform Module">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Perforce on AWS Terraform Module
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2025 Amazon Web Services
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        
<div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/aws-games/cloud-game-development-toolkit" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://x.com/AWSGameTech" target="_blank" rel="noopener" title="x.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M357.2 48h70.6L273.6 224.2 455 464H313L201.7 318.6 74.5 464H3.8l164.9-188.5L-5.2 48h145.6l100.5 132.9zm-24.8 373.8h39.1L119.1 88h-42z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://www.linkedin.com/company/awsgametech" target="_blank" rel="noopener" title="www.linkedin.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3M135.4 416H69V202.2h66.5V416zM102.2 96a38.5 38.5 0 1 1 0 77 38.5 38.5 0 1 1 0-77m282.1 320h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "..", "features": ["content.code.annotate", "content.code.copy", "content.tabs.link", "search.suggest", "search.highlight", "search.share", "navigation.sections", "navigation.indexes", "navigation.tracking", "navigation.tabs", "navigation.tabs.sticky", "navigation.top", "navigation.collapse", "navigation.instant", "navigation.footer", "toc.follow", "toc.sticky", {"emoji_index": "twemoji"}], "search": "../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
     
      <script src="../assets/javascripts/bundle.79ae519e.min.js"></script>
      
        <script src="../js/open_in_new_tab.js"></script>
      
    
<script>
    // Hide preview versions from version selector
    document.addEventListener("DOMContentLoaded", function () {
        // Find all version links in the selector
        const versionLinks = document.querySelectorAll(".md-version__link");

        versionLinks.forEach(function (link) {
            const versionText = link.textContent.trim();

            // Hide preview versions (format: preview-pr-123)
            if (versionText.startsWith("preview-pr-")) {
                const listItem = link.closest("li");
                if (listItem) {
                    listItem.style.display = "none";
                }
            }
        });
    });
</script>

  </body>
</html>