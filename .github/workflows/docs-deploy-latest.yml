#====================================================================================================
## Process
# 1. When docs changes are pushed to main branch, this workflow triggers automatically
# 2. Builds and deploys documentation to "latest" using mike
# 3. Updates the default version pointer to "latest"
#
## Note: Validation runs independently via docs-validate.yml (triggered by push to main)
#====================================================================================================
name: Deploy Documentation to Latest

on:
  push:
    branches:
      - main
    paths:
      - "docs/**"
      - "mkdocs.yml"
      - "**/README.md"
      - "CHANGELOG.md"
      - "CONTRIBUTING.md"
      - ".github/workflows/docs-deploy-latest.yml"
      - ".github/workflows/docs-build-and-deploy.yml"

permissions:
  contents: write
  pages: write

concurrency:
  group: gh-pages-deploy
  cancel-in-progress: false

jobs:
  deploy:
    name: Deploy to Latest
    uses: ./.github/workflows/docs-build-and-deploy.yml
    permissions:
      contents: write
      pages: write
    with:
      mode: "latest"
